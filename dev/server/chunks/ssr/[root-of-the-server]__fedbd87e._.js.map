{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/anjal/OneDrive/Desktop/DZINR/frontend/components/Sidebar-left.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState } from \"react\";\r\nimport {\r\n  Home,\r\n  Hash,\r\n  Heart,\r\n  Clapperboard,\r\n  Bell,\r\n  User,\r\n  Upload,\r\n  MessageSquare,\r\n  Bookmark,\r\n  Activity,\r\n  Moon,\r\n  ChevronDown,\r\n  ChevronUp,\r\n} from \"lucide-react\";\r\nimport { useAuth } from \"@/context/AuthContext\";\r\n\r\nconst COLORS = {\r\n  BACKGROUND_PRIMARY: \"bg-[#131313]\",\r\n  BACKGROUND_SECONDARY: \"bg-gray-800\",\r\n  BORDER_COLOR: \"border-gray-800\",\r\n  TEXT_PRIMARY: \"text-white\",\r\n  TEXT_SECONDARY: \"text-gray-300\",\r\n  TEXT_HEADER: \"text-gray-500\",\r\n  ACTIVE_ACCENT: \"border-white\",\r\n  ACTIVE_BACKGROUND: \"bg-gray-800\",\r\n};\r\n\r\nconst menuSections = [\r\n  {\r\n    title: \"MAIN MENU\",\r\n    links: [\r\n      { name: \"Home Page\", icon: Home, isActive: true },\r\n      { name: \"Trending Topics\", icon: Hash },\r\n      { name: \"Popular Creator\", icon: Heart },\r\n      { name: \"Reels\", icon: Clapperboard },\r\n      { name: \"Notification\", icon: Bell },\r\n    ],\r\n    defaultOpen: true,\r\n  },\r\n  {\r\n    title: \"MY MENU\",\r\n    links: [\r\n      { name: \"Profile\", icon: User },\r\n      { name: \"Shot Upload\", icon: Upload },\r\n      { name: \"Message\", icon: MessageSquare },\r\n    ],\r\n    defaultOpen: true,\r\n  },\r\n];\r\n\r\nconst MenuItem = ({ icon: Icon, name, isActive = false, onClick = () => {} }) => (\r\n  <div\r\n    onClick={onClick}\r\n    className={`flex items-center p-3 my-0.5 rounded-lg transition-colors cursor-pointer text-sm\r\n      ${\r\n        isActive\r\n          ? `${COLORS.ACTIVE_BACKGROUND} ${COLORS.TEXT_PRIMARY} font-semibold border-r-4 ${COLORS.ACTIVE_ACCENT}`\r\n          : `${COLORS.TEXT_SECONDARY} opacity-80 hover:${COLORS.BACKGROUND_SECONDARY}/50 hover:${COLORS.TEXT_PRIMARY}`\r\n      }`}\r\n  >\r\n    <Icon className=\"w-5 h-5 mr-3\" />\r\n    <span>{name}</span>\r\n  </div>\r\n);\r\n\r\nconst MenuSection = ({ section }) => {\r\n  const [isOpen, setIsOpen] = useState(section.defaultOpen);\r\n  const headerClasses = `flex items-center justify-between text-xs font-bold tracking-widest ${COLORS.TEXT_HEADER} uppercase cursor-pointer mb-2`;\r\n  const iconClasses = `w-3 h-3 ${COLORS.TEXT_HEADER}`;\r\n\r\n  return (\r\n    <div className=\"mb-6\">\r\n      <div className={headerClasses} onClick={() => setIsOpen(!isOpen)}>\r\n        {section.title}\r\n        {isOpen ? <ChevronUp className={iconClasses} /> : <ChevronDown className={iconClasses} />}\r\n      </div>\r\n      {isOpen && (\r\n        <nav>\r\n          {section.links.map((link, index) => (\r\n            <MenuItem key={index} {...link} />\r\n          ))}\r\n        </nav>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Sidebar = () => {\r\n  const [isDarkMode, setIsDarkMode] = useState(true);\r\n  const { user, logout } = useAuth();\r\n\r\n  // ✅ Get fallback avatar using Picsum if not provided\r\n  const avatarSrc =\r\n    user?.avatarUrl ||\r\n    `https://picsum.photos/200?random=${user?._id || Math.floor(Math.random() * 1000)}`;\r\n\r\n  return (\r\n    <aside\r\n      className={`w-64 h-screen ${COLORS.BACKGROUND_PRIMARY} ${COLORS.TEXT_PRIMARY} p-4 flex flex-col shadow-2xl rounded-xl border ${COLORS.BORDER_COLOR}`}\r\n    >\r\n      {/* Logo */}\r\n      <div className=\"flex items-center mb-8 pt-1\">\r\n        <h1 className={`text-3xl pl-1 font-serif italic ${COLORS.TEXT_PRIMARY}`}>DZINR-APP</h1>\r\n      </div>\r\n\r\n      {/* Menu Sections */}\r\n      <div className=\"flex-grow\">\r\n        {menuSections.map((section, index) => (\r\n          <MenuSection key={index} section={section} />\r\n        ))}\r\n      </div>\r\n\r\n      {/* ✅ Login or Profile */}\r\n      <div className=\"my-4 border-t border-gray-700 pt-4 flex justify-center\">\r\n        {user ? (\r\n          <div className=\"flex items-center space-x-3 cursor-pointer hover:bg-gray-700 px-4 py-2 rounded-lg transition-all w-full justify-between\">\r\n            <div className=\"flex items-center space-x-3\">\r\n              <img\r\n                src={avatarSrc}\r\n                alt=\"Profile\"\r\n                className=\"w-10 h-10 rounded-full border border-gray-600\"\r\n              />\r\n              <span className=\"font-medium text-white capitalize\">{user.name}</span>\r\n            </div>\r\n            <button\r\n              onClick={logout}\r\n              className=\"text-xs bg-red-600 hover:bg-red-700 text-white py-1 px-3 rounded-md\"\r\n            >\r\n              Logout\r\n            </button>\r\n          </div>\r\n        ) : (\r\n          <a\r\n            href=\"/auth/login\"\r\n            className=\"w-full bg-gray-700 hover:bg-gray-600 text-white font-semibold py-2 px-8 rounded-lg shadow-md transition-all duration-200 flex items-center justify-center\"\r\n          >\r\n            Login\r\n          </a>\r\n        )}\r\n      </div>\r\n\r\n      {/* Dark Mode Toggle */}\r\n      <div\r\n        className={`p-3 ${COLORS.BACKGROUND_SECONDARY} rounded-lg border ${COLORS.BORDER_COLOR} flex items-center justify-between shadow-inner`}\r\n      >\r\n        <div className={`flex items-center text-sm ${COLORS.TEXT_SECONDARY}`}>\r\n          <Moon className={`w-5 h-5 mr-3 ${COLORS.TEXT_PRIMARY}`} />\r\n          <span className={COLORS.TEXT_PRIMARY}>Dark Mode</span>\r\n        </div>\r\n        <label className=\"relative inline-flex items-center cursor-pointer\">\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={isDarkMode}\r\n            onChange={() => setIsDarkMode(!isDarkMode)}\r\n            className=\"sr-only peer\"\r\n          />\r\n          <div\r\n            className={`w-12 h-6 ${COLORS.BACKGROUND_SECONDARY} rounded-full peer-checked:bg-white transition-colors duration-300 shadow-md`}\r\n          ></div>\r\n          <div\r\n            className={`absolute top-0.5 left-[3px] w-5 h-5 rounded-full transition-transform duration-300 shadow-lg ${\r\n              isDarkMode ? \"translate-x-[20px] bg-black\" : \"translate-x-0 bg-white\"\r\n            }`}\r\n          ></div>\r\n        </label>\r\n      </div>\r\n    </aside>\r\n  );\r\n};\r\n\r\nexport default Sidebar;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 334, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/anjal/OneDrive/Desktop/DZINR/frontend/components/posts/PostContentModal.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { X, Image, Video, Smile } from \"lucide-react\";\r\nimport EmojiPicker, { EmojiClickData } from \"emoji-picker-react\";\r\nimport { useAuth } from \"@/context/AuthContext\"; \r\n\r\n// --- INTERFACES ---\r\ninterface MediaItem {\r\n  file: File;\r\n  preview: string;\r\n  type: \"image\" | \"video\";\r\n}\r\n\r\ninterface PostContentModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onPostSuccess?: () => void;\r\n  initialMedia?: MediaItem[];\r\n}\r\n\r\ninterface VideoUploadModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onNext: (videoFile: File | null, videoPreview: string | null) => void;\r\n}\r\n// --- END INTERFACES ---\r\n\r\n// --- VIDEO UPLOAD MODAL COMPONENT (Full Code) ---\r\nconst VideoUploadModal: React.FC<VideoUploadModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  onNext,\r\n}) => {\r\n  const [videoFile, setVideoFile] = useState<File | null>(null);\r\n  const [videoPreview, setVideoPreview] = useState<string | null>(null);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const handleVideoSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (e.target.files && e.target.files[0]) {\r\n      setVideoFile(e.target.files[0]);\r\n      setVideoPreview(URL.createObjectURL(e.target.files[0]));\r\n    }\r\n  };\r\n\r\n  const handleDrop = (e: React.DragEvent<HTMLDivElement>) => {\r\n    e.preventDefault();\r\n    if (e.dataTransfer.files && e.dataTransfer.files[0]) {\r\n      setVideoFile(e.dataTransfer.files[0]);\r\n      setVideoPreview(URL.createObjectURL(e.dataTransfer.files[0]));\r\n    }\r\n  };\r\n\r\n  const handleNext = () => {\r\n    onNext(videoFile, videoPreview);\r\n    setVideoFile(null);\r\n    setVideoPreview(null);\r\n    onClose();\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg w-full max-w-md relative\">\r\n        <button\r\n          className=\"absolute top-3 right-3 text-gray-500 dark:text-gray-300\"\r\n          onClick={() => {\r\n            if (videoPreview) URL.revokeObjectURL(videoPreview);\r\n            setVideoFile(null);\r\n            setVideoPreview(null);\r\n            onClose();\r\n          }}\r\n        >\r\n          <X className=\"w-5 h-5\" />\r\n        </button>\r\n\r\n        <h2 className=\"text-lg font-semibold mb-4 text-gray-900 dark:text-white\">\r\n          Attach Video\r\n        </h2>\r\n\r\n        <div\r\n          className=\"border-2 border-dashed border-gray-400 dark:border-gray-600 rounded-md p-6 text-center cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition duration-150\"\r\n          onDrop={handleDrop}\r\n          onDragOver={(e) => e.preventDefault()}\r\n        >\r\n          {videoPreview ? (\r\n            <video\r\n              src={videoPreview}\r\n              controls\r\n              className=\"w-full max-h-60 rounded-md\"\r\n            />\r\n          ) : (\r\n            <>\r\n              <p className=\"text-gray-700 dark:text-gray-200 mb-2\">\r\n                Drag & Drop your video here\r\n              </p>\r\n              <label className=\"text-blue-600 dark:text-blue-400 underline cursor-pointer\">\r\n                or select from your computer\r\n                <input\r\n                  type=\"file\"\r\n                  accept=\"video/*\"\r\n                  onChange={handleVideoSelect}\r\n                  className=\"hidden\"\r\n                />\r\n              </label>\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        <button\r\n          onClick={handleNext}\r\n          disabled={!videoFile}\r\n          className={`mt-4 w-full px-4 py-2 rounded-md font-semibold transition duration-150 ${\r\n            videoFile\r\n              ? \"bg-blue-600 text-white hover:bg-blue-700\"\r\n              : \"bg-gray-300 text-gray-500 cursor-not-allowed\"\r\n          }`}\r\n        >\r\n          Next\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n// --- END VIDEO UPLOAD MODAL COMPONENT ---\r\n\r\n\r\n// --- POST CONTENT MODAL COMPONENT (Full Code) ---\r\nconst PostContentModal: React.FC<PostContentModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  onPostSuccess,\r\n  initialMedia,\r\n}) => {\r\n  // Now user includes the token\r\n  const { user } = useAuth(); \r\n  const [content, setContent] = useState(\"\");\r\n  const [media, setMedia] = useState<MediaItem[]>(initialMedia || []);\r\n  const [showEmojiPicker, setShowEmojiPicker] = useState(false);\r\n  const [showVideoModal, setShowVideoModal] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  \r\n  // Reset state when the modal opens/closes or initialMedia prop changes\r\n  useEffect(() => {\r\n    setMedia(initialMedia || []);\r\n    setContent(\"\");\r\n  }, [initialMedia, isOpen]); \r\n\r\n  // Separate useEffect for cleaning up Object URLs when media state changes or component unmounts\r\n  useEffect(() => {\r\n    return () => {\r\n      media.forEach(item => URL.revokeObjectURL(item.preview));\r\n    };\r\n  }, [media]); \r\n\r\n\r\n  const handleMediaSelect = (\r\n    e: React.ChangeEvent<HTMLInputElement>,\r\n    type: \"image\" | \"video\"\r\n  ) => {\r\n    if (!e.target.files) return;\r\n    const filesArray = Array.from(e.target.files).map((file) => ({\r\n      file,\r\n      preview: URL.createObjectURL(file),\r\n      type,\r\n    }));\r\n    setMedia((prev) => [...prev, ...filesArray]);\r\n    e.target.value = ''; // Reset file input\r\n  };\r\n\r\n  const handleRemoveMedia = (index: number) => {\r\n    const removed = media[index];\r\n    if (removed.preview) URL.revokeObjectURL(removed.preview);\r\n    setMedia((prev) => prev.filter((_, i) => i !== index));\r\n  };\r\n\r\n  const handleEmojiClick = (emojiData: EmojiClickData) => {\r\n    setContent((prev) => prev + emojiData.emoji);\r\n    setShowEmojiPicker(false);\r\n  };\r\n\r\n  const handleVideoNext = (file: File | null, preview: string | null) => {\r\n    if (!file || !preview) return;\r\n    setMedia((prev) => [...prev, { file, preview, type: \"video\" }]);\r\n  };\r\n\r\n  // Robust close handler that cleans up URLs and resets state\r\n  const handleClose = () => {\r\n    media.forEach(item => URL.revokeObjectURL(item.preview)); \r\n    setMedia([]); \r\n    setContent(\"\"); \r\n    onClose(); \r\n  };\r\n\r\n  const handlePostClick = async () => {\r\n    if (!content.trim() && media.length === 0) return;\r\n    setLoading(true);\r\n\r\n    // Check for user token\r\n    if (!user || !user.token) {\r\n        console.error(\"❌ Post failed: User is not authenticated or token is missing.\");\r\n        alert(\"Authentication failed. Please log in again.\");\r\n        setLoading(false);\r\n        return;\r\n    }\r\n    \r\n    let mediaCleanup: string[] = [];\r\n\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append(\"text\", content);\r\n      \r\n      media.forEach((item) => {\r\n        // CRITICAL FIX: Use 'mediaFile' key to match the backend handler\r\n        formData.append(`mediaFile`, item.file); \r\n        formData.append(`mediaType`, item.type); \r\n        mediaCleanup.push(item.preview);\r\n      });\r\n\r\n      const res = await fetch(\"/api/posts\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          Authorization: `Bearer ${user.token}`, // Token is definitely here now\r\n        },\r\n        body: formData,\r\n      });\r\n\r\n      if (!res.ok) {\r\n        throw new Error(`Failed to create post. Status: ${res.status}`); \r\n      }\r\n\r\n      onPostSuccess?.();\r\n      handleClose(); \r\n    } catch (error) {\r\n      console.error(\"❌ Post failed:\", error);\r\n      alert(\"Failed to upload post: \" + (error as Error).message);\r\n    } finally {\r\n      setLoading(false);\r\n      mediaCleanup.forEach(url => URL.revokeObjectURL(url));\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <>\r\n      <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg w-full max-w-3xl relative p-6\">\r\n          <button\r\n            className=\"absolute top-3 right-3 text-gray-500 dark:text-gray-300\"\r\n            onClick={handleClose}\r\n          >\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n\r\n          {/* Profile */}\r\n          <div className=\"flex items-center mb-4\">\r\n            <img\r\n              src={user?.profilePic || \"https://picsum.photos/200\"}\r\n              alt=\"Profile\"\r\n              className=\"w-10 h-10 rounded-full object-cover mr-3\"\r\n            />\r\n            <span className=\"font-semibold text-gray-800 dark:text-gray-100\">\r\n              {user?.name || \"John Doe\"}\r\n            </span>\r\n          </div>\r\n\r\n          {/* Textarea */}\r\n          <textarea\r\n            rows={6}\r\n            placeholder=\"Write something...\"\r\n            className=\"w-full bg-gray-100 dark:bg-gray-700 rounded-md p-3 text-gray-700 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-400 dark:focus:ring-gray-600 resize-none mb-3\"\r\n            value={content}\r\n            onChange={(e) => setContent(e.target.value)}\r\n          />\r\n\r\n          {/* Media Preview */}\r\n          {media.length > 0 && (\r\n            <div className=\"flex flex-wrap gap-2 mb-3 max-h-60 overflow-y-auto\">\r\n              {media.map((item, idx) => (\r\n                <div key={idx} className=\"relative\">\r\n                  {item.type === \"image\" ? (\r\n                    <img\r\n                      src={item.preview}\r\n                      alt=\"attachment\"\r\n                      className=\"w-24 h-24 object-cover rounded-md\"\r\n                    />\r\n                  ) : (\r\n                    <video\r\n                      src={item.preview}\r\n                      controls\r\n                      className=\"w-24 h-24 object-cover rounded-md\"\r\n                    />\r\n                  )}\r\n                  <button\r\n                    onClick={() => handleRemoveMedia(idx)}\r\n                    className=\"absolute top-1 right-1 bg-black bg-opacity-50 rounded-full w-6 h-6 flex items-center justify-center text-white text-sm\"\r\n                  >\r\n                    ×\r\n                  </button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n\r\n          {/* Toolbar */}\r\n          <div className=\"flex items-center space-x-2 relative\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => setShowEmojiPicker((prev) => !prev)}\r\n              className=\"p-2 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600\"\r\n            >\r\n              <Smile className=\"w-5 h-5 text-gray-600 dark:text-gray-300\" />\r\n            </button>\r\n            {showEmojiPicker && (\r\n              <div className=\"absolute z-50 mt-12\">\r\n                <EmojiPicker onEmojiClick={handleEmojiClick} />\r\n              </div>\r\n            )}\r\n\r\n            <label className=\"p-2 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 cursor-pointer\">\r\n              <Image className=\"w-5 h-5 text-gray-600 dark:text-gray-300\" />\r\n              <input\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                multiple\r\n                onChange={(e) => handleMediaSelect(e, \"image\")}\r\n                className=\"hidden\"\r\n              />\r\n            </label>\r\n\r\n            <button\r\n              onClick={() => setShowVideoModal(true)}\r\n              className=\"p-2 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600\"\r\n            >\r\n              <Video className=\"w-5 h-5 text-gray-600 dark:text-gray-300\" />\r\n            </button>\r\n          </div>\r\n\r\n          {/* Post Button */}\r\n          <button\r\n            onClick={handlePostClick}\r\n            disabled={loading || (!content.trim() && media.length === 0)}\r\n            className={`mt-4 w-full px-4 py-2 rounded-md font-semibold transition duration-150 ${\r\n              loading\r\n                ? \"bg-gray-400 text-white\"\r\n                : content.trim() || media.length > 0\r\n                ? \"bg-blue-600 text-white hover:bg-blue-700\"\r\n                : \"bg-gray-300 text-gray-500 cursor-not-allowed\"\r\n            }`}\r\n          >\r\n            {loading ? \"Posting...\" : \"Post\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Video Upload Modal */}\r\n      <VideoUploadModal\r\n        isOpen={showVideoModal}\r\n        onClose={() => setShowVideoModal(false)}\r\n        onNext={handleVideoNext}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PostContentModal;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 808, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/anjal/OneDrive/Desktop/DZINR/frontend/components/posts/PostCreator.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState } from \"react\";\r\nimport { Edit, MoreHorizontal } from \"lucide-react\";\r\nimport PostContentModal from \"./PostContentModal\";\r\nimport { useAuth } from \"@/context/AuthContext\"; // ✅ import your AuthContext\r\n\r\nconst MOCK_AVATAR = \"https://picsum.photos/40/40?random=1\";\r\n\r\nconst PostCreator: React.FC = () => {\r\n  const [isPostModalOpen, setPostModalOpen] = useState(false);\r\n  const [attachedVideo, setAttachedVideo] = useState<File | null>(null);\r\n  const [attachedVideoPreview, setAttachedVideoPreview] = useState<string | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const { user, token } = useAuth(); // ✅ from AuthContext\r\n\r\n  const handlePost = async (content: string, videoFile?: File | null) => {\r\n    if (!user) {\r\n      alert(\"You must be logged in to post.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n\r\n      const formData = new FormData();\r\n      formData.append(\"text\", content);\r\n\r\n      if (videoFile) {\r\n        formData.append(\"media\", videoFile);\r\n        formData.append(\"mediaType\", \"video\");\r\n      }\r\n\r\n      const res = await fetch(\"/api/posts\", {\r\n        method: \"POST\",\r\n        body: formData,\r\n        credentials: \"include\", // ✅ send cookies if JWT stored there\r\n        headers: token\r\n          ? {\r\n              Authorization: `Bearer ${token}`, // ✅ send JWT if in context\r\n            }\r\n          : {},\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (res.ok) {\r\n        console.log(\"✅ Post created successfully:\", data);\r\n        setAttachedVideo(null);\r\n        setAttachedVideoPreview(null);\r\n        setPostModalOpen(false);\r\n      } else {\r\n        console.error(\"❌ Error creating post:\", data.message);\r\n        alert(`Failed to post: ${data.message}`);\r\n      }\r\n    } catch (err) {\r\n      console.error(\"❌ Request failed:\", err);\r\n      alert(\"Something went wrong while posting.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white dark:bg-[#131313] rounded-xs shadow-lg dark:shadow-2xl p-4 w-full mx-auto border border-gray-200 dark:border-gray-700\">\r\n      {/* Top Bar */}\r\n      <div className=\"flex justify-start border-b border-gray-200 dark:border-gray-700 pb-3 mb-3 text-sm md:text-base\">\r\n        <div\r\n          className=\"flex items-center space-x-2 text-gray-900 dark:text-white font-semibold cursor-pointer p-2 rounded-md transition duration-150 relative after:absolute after:bottom-[-13px] after:left-0 after:right-0 after:h-0.5 after:bg-gray-900 dark:after:bg-white\"\r\n          onClick={() => setPostModalOpen(true)}\r\n        >\r\n          <Edit className=\"w-5 h-5\" />\r\n          <span>Make Post</span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Text Input */}\r\n      <div\r\n        className=\"flex space-x-3 items-start mb-4 cursor-text\"\r\n        onClick={() => setPostModalOpen(true)}\r\n      >\r\n        <img\r\n          src={user?.avatarUrl || MOCK_AVATAR}\r\n          alt=\"User Avatar\"\r\n          className=\"w-10 h-10 rounded-lg object-cover ring-2 ring-gray-400 dark:ring-gray-600\"\r\n        />\r\n        <textarea\r\n          rows={3}\r\n          placeholder=\"What you doing? Where you at? Oh you got plans? Please share that!\"\r\n          className=\"flex-1 bg-gray-100 dark:bg-gray-700 border-none rounded-md py-2 px-4 text-gray-700 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-400 dark:focus:ring-gray-600 resize-none transition duration-150\"\r\n          readOnly\r\n        />\r\n      </div>\r\n\r\n      {/* Post Modal */}\r\n      <PostContentModal\r\n        isOpen={isPostModalOpen}\r\n        onClose={() => setPostModalOpen(false)}\r\n        onPost={handlePost}\r\n        initialVideoFile={attachedVideo}\r\n        initialVideoPreview={attachedVideoPreview}\r\n        loading={loading}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PostCreator;\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA,mNAAiD,4BAA4B;AAJ7E;;;;;;AAMA,MAAM,cAAc;AAEpB,MAAM,cAAwB;IAC5B,MAAM,CAAC,iBAAiB,iBAAiB,GAAG,IAAA,iNAAQ,EAAC;IACrD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAc;IAChE,MAAM,CAAC,sBAAsB,wBAAwB,GAAG,IAAA,iNAAQ,EAAgB;IAChF,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,IAAA,kIAAO,KAAI,qBAAqB;IAExD,MAAM,aAAa,OAAO,SAAiB;QACzC,IAAI,CAAC,MAAM;YACT,MAAM;YACN;QACF;QAEA,IAAI;YACF,WAAW;YAEX,MAAM,WAAW,IAAI;YACrB,SAAS,MAAM,CAAC,QAAQ;YAExB,IAAI,WAAW;gBACb,SAAS,MAAM,CAAC,SAAS;gBACzB,SAAS,MAAM,CAAC,aAAa;YAC/B;YAEA,MAAM,MAAM,MAAM,MAAM,cAAc;gBACpC,QAAQ;gBACR,MAAM;gBACN,aAAa;gBACb,SAAS,QACL;oBACE,eAAe,CAAC,OAAO,EAAE,OAAO;gBAClC,IACA,CAAC;YACP;YAEA,MAAM,OAAO,MAAM,IAAI,IAAI;YAE3B,IAAI,IAAI,EAAE,EAAE;gBACV,QAAQ,GAAG,CAAC,gCAAgC;gBAC5C,iBAAiB;gBACjB,wBAAwB;gBACxB,iBAAiB;YACnB,OAAO;gBACL,QAAQ,KAAK,CAAC,0BAA0B,KAAK,OAAO;gBACpD,MAAM,CAAC,gBAAgB,EAAE,KAAK,OAAO,EAAE;YACzC;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,qBAAqB;YACnC,MAAM;QACR,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBACC,WAAU;oBACV,SAAS,IAAM,iBAAiB;;sCAEhC,8OAAC,mNAAI;4BAAC,WAAU;;;;;;sCAChB,8OAAC;sCAAK;;;;;;;;;;;;;;;;;0BAKV,8OAAC;gBACC,WAAU;gBACV,SAAS,IAAM,iBAAiB;;kCAEhC,8OAAC;wBACC,KAAK,MAAM,aAAa;wBACxB,KAAI;wBACJ,WAAU;;;;;;kCAEZ,8OAAC;wBACC,MAAM;wBACN,aAAY;wBACZ,WAAU;wBACV,QAAQ;;;;;;;;;;;;0BAKZ,8OAAC,mJAAgB;gBACf,QAAQ;gBACR,SAAS,IAAM,iBAAiB;gBAChC,QAAQ;gBACR,kBAAkB;gBAClB,qBAAqB;gBACrB,SAAS;;;;;;;;;;;;AAIjB;uCAEe","debugId":null}},
    {"offset": {"line": 955, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/anjal/OneDrive/Desktop/DZINR/frontend/components/comments/CommentThread.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState } from \"react\";\r\nimport { ArrowRight, Heart, MessageCircle } from \"lucide-react\";\r\n\r\nexport interface CommentType {\r\n  id: number;\r\n  avatar: string;\r\n  name: string;\r\n  text: string;\r\n  replies?: CommentType[];\r\n  image?: string;\r\n}\r\n\r\ninterface CommentThreadProps {\r\n  comment: CommentType;\r\n  onAddReply?: (parentId: number, replyText: string) => void;\r\n}\r\n\r\nconst CommentThread: React.FC<CommentThreadProps> = ({\r\n  comment,\r\n  onAddReply,\r\n}) => {\r\n  const [liked, setLiked] = useState(false);\r\n  const [showReplyInput, setShowReplyInput] = useState(false);\r\n  const [replyText, setReplyText] = useState(\"\");\r\n  const [showReplies, setShowReplies] = useState(true);\r\n\r\n  const handleAddReply = () => {\r\n    if (!replyText.trim()) return;\r\n    onAddReply && onAddReply(comment.id, replyText);\r\n    setReplyText(\"\");\r\n    setShowReplyInput(false);\r\n    setShowReplies(true); // auto-show replies after adding\r\n  };\r\n\r\n  return (\r\n    <div className=\"ml-0 mt-2\">\r\n      <div className=\"flex items-start space-x-2\">\r\n        <img\r\n          src={comment.avatar}\r\n          alt={comment.name}\r\n          className=\"w-8 h-8 rounded-lg object-cover ring-1 ring-gray-300 dark:ring-gray-600\"\r\n        />\r\n        <div className=\"flex-1\">\r\n          <div className=\"bg-gray-100 dark:bg-gray-700 px-3 py-1 rounded-lg text-sm flex justify-between items-center\">\r\n            <span>\r\n              <span className=\"font-semibold text-gray-800 dark:text-gray-200\">\r\n                {comment.name}\r\n              </span>{\" \"}\r\n              {comment.text}\r\n            </span>\r\n            {comment.image && (\r\n              <img src={comment.image} className=\"w-6 h-6 rounded ml-2\" />\r\n            )}\r\n          </div>\r\n\r\n          {/* Actions */}\r\n          <div className=\"flex space-x-4 text-xs text-gray-500 dark:text-gray-400 mt-1 ml-1\">\r\n            <button\r\n              onClick={() => setLiked(!liked)}\r\n              className={`hover:underline flex items-center space-x-1 ${\r\n                liked ? \"text-red-500\" : \"\"\r\n              }`}\r\n            >\r\n              Like\r\n            </button>\r\n            <button\r\n              onClick={() => setShowReplyInput(!showReplyInput)}\r\n              className=\"hover:underline flex items-center space-x-1\"\r\n            >\r\n              Reply\r\n            </button>\r\n            {comment.replies && comment.replies.length > 0 && (\r\n              <button\r\n                className=\"hover:underline flex items-center space-x-1\"\r\n                onClick={() => setShowReplies(!showReplies)}\r\n              >\r\n                {showReplies\r\n                  ? \"Hide Replies\"\r\n                  : `Show Replies (${comment.replies.length})`}\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {/* Reply Input */}\r\n          {showReplyInput && (\r\n            <div className=\"flex items-center space-x-2 mt-2 ml-2\">\r\n              <input\r\n                type=\"text\"\r\n                className=\"flex-1 bg-gray-100 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md py-1 px-2 text-sm text-gray-700 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400 dark:focus:ring-gray-600\"\r\n                placeholder=\"Write a reply...\"\r\n                value={replyText}\r\n                onChange={(e) => setReplyText(e.target.value)}\r\n                onKeyDown={(e) => e.key === \"Enter\" && handleAddReply()}\r\n              />\r\n              <button onClick={handleAddReply}>\r\n                <ArrowRight className=\"w-5 h-5 text-gray-500 dark:text-gray-400\" />\r\n              </button>\r\n            </div>\r\n          )}\r\n\r\n          {/* Nested Replies */}\r\n          {showReplies && (\r\n            <div className=\"ml-6\">\r\n              {comment.replies?.map((reply) => (\r\n                <CommentThread\r\n                  key={reply.id}\r\n                  comment={reply}\r\n                  onAddReply={onAddReply}\r\n                />\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CommentThread;\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAmBA,MAAM,gBAA8C,CAAC,EACnD,OAAO,EACP,UAAU,EACX;IACC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IACrD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAE/C,MAAM,iBAAiB;QACrB,IAAI,CAAC,UAAU,IAAI,IAAI;QACvB,cAAc,WAAW,QAAQ,EAAE,EAAE;QACrC,aAAa;QACb,kBAAkB;QAClB,eAAe,OAAO,iCAAiC;IACzD;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBACC,KAAK,QAAQ,MAAM;oBACnB,KAAK,QAAQ,IAAI;oBACjB,WAAU;;;;;;8BAEZ,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;;sDACC,8OAAC;4CAAK,WAAU;sDACb,QAAQ,IAAI;;;;;;wCACP;wCACP,QAAQ,IAAI;;;;;;;gCAEd,QAAQ,KAAK,kBACZ,8OAAC;oCAAI,KAAK,QAAQ,KAAK;oCAAE,WAAU;;;;;;;;;;;;sCAKvC,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,SAAS,IAAM,SAAS,CAAC;oCACzB,WAAW,CAAC,4CAA4C,EACtD,QAAQ,iBAAiB,IACzB;8CACH;;;;;;8CAGD,8OAAC;oCACC,SAAS,IAAM,kBAAkB,CAAC;oCAClC,WAAU;8CACX;;;;;;gCAGA,QAAQ,OAAO,IAAI,QAAQ,OAAO,CAAC,MAAM,GAAG,mBAC3C,8OAAC;oCACC,WAAU;oCACV,SAAS,IAAM,eAAe,CAAC;8CAE9B,cACG,iBACA,CAAC,cAAc,EAAE,QAAQ,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;;;;;;;;;;;;wBAMnD,gCACC,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,MAAK;oCACL,WAAU;oCACV,aAAY;oCACZ,OAAO;oCACP,UAAU,CAAC,IAAM,aAAa,EAAE,MAAM,CAAC,KAAK;oCAC5C,WAAW,CAAC,IAAM,EAAE,GAAG,KAAK,WAAW;;;;;;8CAEzC,8OAAC;oCAAO,SAAS;8CACf,cAAA,8OAAC,gOAAU;wCAAC,WAAU;;;;;;;;;;;;;;;;;wBAM3B,6BACC,8OAAC;4BAAI,WAAU;sCACZ,QAAQ,OAAO,EAAE,IAAI,CAAC,sBACrB,8OAAC;oCAEC,SAAS;oCACT,YAAY;mCAFP,MAAM,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;AAW/B;uCAEe","debugId":null}},
    {"offset": {"line": 1145, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/anjal/OneDrive/Desktop/DZINR/frontend/utils/verifyToken.js"],"sourcesContent":["\r\nimport jwt from \"jsonwebtoken\";\r\n\r\nexport const verifyToken = async (req) => {\r\n  try {\r\n    const authHeader = req.headers.get(\"authorization\");\r\n    if (!authHeader || !authHeader.startsWith(\"Bearer \")) return null;\r\n\r\n    const token = authHeader.split(\" \")[1];\r\n    const decoded = jwt.verify(token, process.env.JWT_SECRET);\r\n    return decoded; // { id, email, ... }\r\n  } catch (err) {\r\n    return null;\r\n  }\r\n};\r\n"],"names":[],"mappings":";;;;AACA;;AAEO,MAAM,cAAc,OAAO;IAChC,IAAI;QACF,MAAM,aAAa,IAAI,OAAO,CAAC,GAAG,CAAC;QACnC,IAAI,CAAC,cAAc,CAAC,WAAW,UAAU,CAAC,YAAY,OAAO;QAE7D,MAAM,QAAQ,WAAW,KAAK,CAAC,IAAI,CAAC,EAAE;QACtC,MAAM,UAAU,gJAAG,CAAC,MAAM,CAAC,OAAO,QAAQ,GAAG,CAAC,UAAU;QACxD,OAAO,SAAS,qBAAqB;IACvC,EAAE,OAAO,KAAK;QACZ,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 1166, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/anjal/OneDrive/Desktop/DZINR/frontend/components/comments/Comment.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { ArrowRight } from \"lucide-react\";\r\nimport CommentThread, { CommentType } from \"./CommentThread\";\r\nimport { getToken } from \"@/utils/verifyToken\"; // assume you have a function to get JWT\r\n\r\ninterface CommentProps {\r\n  currentUserCommentAvatar: string;\r\n  postId: string;\r\n}\r\n\r\nconst Comment: React.FC<CommentProps> = ({\r\n  currentUserCommentAvatar,\r\n  postId,\r\n}) => {\r\n  const [comments, setComments] = useState<CommentType[]>([]);\r\n  const [newComment, setNewComment] = useState(\"\");\r\n  const [showComments, setShowComments] = useState(true);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Fetch comments on mount\r\n  useEffect(() => {\r\n    const fetchComments = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const res = await fetch(`/api/comments?postId=${postId}`);\r\n        const data = await res.json();\r\n        if (data.success) {\r\n          // Map backend comment _id to id for frontend\r\n          const mappedComments = data.comments.map((c: any) => ({\r\n            id: c._id,\r\n            avatar: c.author.avatarUrl,\r\n            name: c.author.name,\r\n            text: c.text,\r\n            likes: c.likes,\r\n            replies: c.replies?.map((r: any) => ({\r\n              id: r._id,\r\n              avatar: r.author.avatarUrl,\r\n              name: r.author.name,\r\n              text: r.text,\r\n              likes: r.likes,\r\n            })),\r\n          }));\r\n          setComments(mappedComments);\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Failed to fetch comments:\", err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchComments();\r\n  }, [postId]);\r\n\r\n  const toggleComments = () => setShowComments((prev) => !prev);\r\n\r\n  const handleAddComment = async () => {\r\n    if (!newComment.trim()) return;\r\n\r\n    try {\r\n      const token = localStorage.getItem(\"token\"); // or wherever you store the JWT\r\n      const res = await fetch(\"/api/comments\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify({ postId, text: newComment }),\r\n      });\r\n      const data = await res.json();\r\n      if (data.success) {\r\n        const newC: CommentType = {\r\n          id: data.comment._id,\r\n          avatar: data.comment.author.avatarUrl,\r\n          name: data.comment.author.name,\r\n          text: data.comment.text,\r\n          replies: [],\r\n        };\r\n        setComments([newC, ...comments]);\r\n        setNewComment(\"\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Failed to add comment:\", err);\r\n    }\r\n  };\r\n\r\n  const handleAddReply = async (parentId: string, replyText: string) => {\r\n    if (!replyText.trim()) return;\r\n    try {\r\n      const token = getToken();\r\n      const res = await fetch(`/api/comments/${parentId}/replies`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify({ text: replyText }),\r\n      });\r\n      const data = await res.json();\r\n      if (data.success) {\r\n        const addReplyRecursively = (\r\n          commentList: CommentType[]\r\n        ): CommentType[] =>\r\n          commentList.map((comment) => {\r\n            if (comment.id === parentId) {\r\n              const newReply: CommentType = {\r\n                id: data.comment._id,\r\n                avatar: data.comment.author.avatarUrl,\r\n                name: data.comment.author.name,\r\n                text: replyText,\r\n                replies: [],\r\n              };\r\n              return {\r\n                ...comment,\r\n                replies: comment.replies\r\n                  ? [...comment.replies, newReply]\r\n                  : [newReply],\r\n              };\r\n            }\r\n            if (comment.replies) {\r\n              return {\r\n                ...comment,\r\n                replies: addReplyRecursively(comment.replies),\r\n              };\r\n            }\r\n            return comment;\r\n          });\r\n\r\n        setComments((prev) => addReplyRecursively(prev));\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Failed to add reply:\", err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"mt-3\">\r\n      <button\r\n        onClick={toggleComments}\r\n        className=\"text-sm text-blue-500 hover:underline mb-2\"\r\n      >\r\n        {showComments ? \"Hide Comments\" : `View Comments (${comments.length})`}\r\n      </button>\r\n\r\n      {showComments && (\r\n        <div className=\"space-y-3\">\r\n          {loading && <div>Loading comments...</div>}\r\n          {!loading &&\r\n            comments.map((comment) => (\r\n              <CommentThread\r\n                key={comment.id}\r\n                comment={comment}\r\n                onAddReply={handleAddReply}\r\n              />\r\n            ))}\r\n\r\n          {/* Add new comment input */}\r\n          <div className=\"flex items-center space-x-3 mt-4\">\r\n            <img\r\n              src={currentUserCommentAvatar}\r\n              alt=\"Your avatar\"\r\n              className=\"w-8 h-8 rounded-lg object-cover ring-1 ring-gray-300 dark:ring-gray-600\"\r\n            />\r\n            <div className=\"flex-1 relative\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Write a comment...\"\r\n                className=\"w-full bg-gray-100 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md py-2 pl-4 pr-10 text-gray-700 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400 dark:focus:ring-gray-600 transition duration-150 text-sm\"\r\n                value={newComment}\r\n                onChange={(e) => setNewComment(e.target.value)}\r\n                onKeyDown={(e) => e.key === \"Enter\" && handleAddComment()}\r\n              />\r\n              <button\r\n                onClick={handleAddComment}\r\n                className=\"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300\"\r\n              >\r\n                <ArrowRight className=\"w-5 h-5\" />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Comment;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1407, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/anjal/OneDrive/Desktop/DZINR/frontend/components/posts/PostCardSkeleton.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React from \"react\";\r\n\r\nconst PostCardSkeleton: React.FC = () => {\r\n  return (\r\n    <div className=\"bg-white dark:bg-[#131313] rounded-lg shadow-lg dark:shadow-2xl p-4 w-full mx-auto border border-gray-200 dark:border-gray-700 mb-6 animate-pulse\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center mb-3\">\r\n        <div className=\"w-10 h-10 bg-gray-300 dark:bg-gray-700 rounded-lg mr-3\" />\r\n        <div className=\"flex-1 space-y-2\">\r\n          <div className=\"h-3 bg-gray-300 dark:bg-gray-700 rounded w-32\" />\r\n          <div className=\"h-2 bg-gray-300 dark:bg-gray-700 rounded w-20\" />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Post Text */}\r\n      <div className=\"space-y-2 mb-3\">\r\n        <div className=\"h-3 bg-gray-300 dark:bg-gray-700 rounded w-full\" />\r\n        <div className=\"h-3 bg-gray-300 dark:bg-gray-700 rounded w-5/6\" />\r\n      </div>\r\n\r\n      {/* Post Images */}\r\n      <div className=\"grid gap-2 mb-4 grid-cols-2\">\r\n        <div className=\"h-52 bg-gray-300 dark:bg-gray-700 rounded-md\" />\r\n        <div className=\"h-52 bg-gray-300 dark:bg-gray-700 rounded-md\" />\r\n      </div>\r\n\r\n      {/* Actions */}\r\n      <div className=\"flex justify-around border-t border-b border-gray-200 dark:border-gray-700 py-2 mb-3\">\r\n        <div className=\"h-6 w-16 bg-gray-300 dark:bg-gray-700 rounded-md\" />\r\n        <div className=\"h-6 w-16 bg-gray-300 dark:bg-gray-700 rounded-md\" />\r\n        <div className=\"h-6 w-16 bg-gray-300 dark:bg-gray-700 rounded-md\" />\r\n      </div>\r\n\r\n      {/* Liked By */}\r\n      <div className=\"h-3 bg-gray-300 dark:bg-gray-700 rounded w-1/3 mb-3\" />\r\n\r\n      {/* Comments */}\r\n      <div className=\"space-y-2\">\r\n        <div className=\"flex items-start space-x-2\">\r\n          <div className=\"w-8 h-8 bg-gray-300 dark:bg-gray-700 rounded-lg\" />\r\n          <div className=\"flex-1 space-y-2\">\r\n            <div className=\"h-3 bg-gray-300 dark:bg-gray-700 rounded w-5/6\" />\r\n            <div className=\"h-2 bg-gray-300 dark:bg-gray-700 rounded w-2/3\" />\r\n          </div>\r\n        </div>\r\n        <div className=\"flex items-start space-x-2\">\r\n          <div className=\"w-8 h-8 bg-gray-300 dark:bg-gray-700 rounded-lg\" />\r\n          <div className=\"flex-1 space-y-2\">\r\n            <div className=\"h-3 bg-gray-300 dark:bg-gray-700 rounded w-4/6\" />\r\n            <div className=\"h-2 bg-gray-300 dark:bg-gray-700 rounded w-1/2\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PostCardSkeleton;\r\n"],"names":[],"mappings":";;;;;AAAA;;AAIA,MAAM,mBAA6B;IACjC,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;;;;;0CACf,8OAAC;gCAAI,WAAU;;;;;;;;;;;;;;;;;;0BAKnB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAI,WAAU;;;;;;;;;;;;0BAIjB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAI,WAAU;;;;;;;;;;;;0BAIjB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAI,WAAU;;;;;;;;;;;;0BAIjB,8OAAC;gBAAI,WAAU;;;;;;0BAGf,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;;;;;0CACf,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;;;;;kDACf,8OAAC;wCAAI,WAAU;;;;;;;;;;;;;;;;;;kCAGnB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;;;;;0CACf,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;;;;;kDACf,8OAAC;wCAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAM3B;uCAEe","debugId":null}},
    {"offset": {"line": 1639, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/anjal/OneDrive/Desktop/DZINR/frontend/components/comments/CommentSkeleton.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React from \"react\";\r\n\r\nconst CommentSkeleton: React.FC = () => {\r\n  return (\r\n    <div className=\"flex items-start space-x-2 animate-pulse mt-2 ml-0\">\r\n      <div className=\"w-8 h-8 bg-gray-300 dark:bg-gray-700 rounded-lg\" />\r\n      <div className=\"flex-1 space-y-2\">\r\n        <div className=\"h-3 bg-gray-300 dark:bg-gray-700 rounded w-3/4\" />\r\n        <div className=\"h-2 bg-gray-300 dark:bg-gray-700 rounded w-1/2\" />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CommentSkeleton;\r\n"],"names":[],"mappings":";;;;;AAAA;;AAIA,MAAM,kBAA4B;IAChC,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;;;;;0BACf,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAI,WAAU;;;;;;;;;;;;;;;;;;AAIvB;uCAEe","debugId":null}},
    {"offset": {"line": 1692, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/anjal/OneDrive/Desktop/DZINR/frontend/components/posts/PostCard.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { Heart, MessageCircle, Share2 } from \"lucide-react\";\r\nimport Comment from \"../comments/Comment\";\r\nimport PostCardSkeleton from \"../posts/PostCardSkeleton\";\r\nimport CommentSkeleton from \"../comments/CommentSkeleton\";\r\nimport { useAuth } from \"@/context/AuthContext\";\r\n\r\ninterface MediaItem {\r\n    id: string;\r\n    url: string; // Changed from src to url to align with backend mapping\r\n    type: string; // image or video\r\n}\r\n\r\n// Adjusted CommentType to align with data structure\r\ninterface CommentType {\r\n  id: string;\r\n  author: {\r\n    _id: string; // Use _id for MongoDB ID\r\n    name: string;\r\n    avatarUrl: string;\r\n  };\r\n  text: string;\r\n  replies?: CommentType[];\r\n}\r\n\r\ninterface PostCardProps {\r\n  postId: string;\r\n}\r\n\r\n// Updated Post state structure to reflect API response fields (author, media, likes)\r\ninterface PostData {\r\n    id: string;\r\n    userAvatarUrl: string;\r\n    name: string;\r\n    feeling?: string;\r\n    withUser?: string;\r\n    postDate: string;\r\n    postText: string;\r\n    media: MediaItem[]; // Use 'media' to align with backend\r\n    likes: { _id: string, name: string }[]; // Array of user objects who liked it\r\n    comments: CommentType[];\r\n    // We calculate these derived properties locally\r\n}\r\n\r\nconst PostCard: React.FC<PostCardProps> = ({ postId }) => {\r\n    const { user } = useAuth();\r\n    const [loading, setLoading] = useState(true);\r\n    const [sharing, setSharing] = useState(false);\r\n    const [showComments, setShowComments] = useState(false);\r\n    \r\n    // Use PostData interface for the state\r\n    const [post, setPost] = useState<PostData | null>(null);\r\n\r\n    // Derived states\r\n    const postLiked = post?.likes.some(like => like._id === user?._id) || false;\r\n    \r\n    // Calculates how many people (excluding the current user) liked the post\r\n    const likedNames = post?.likes\r\n        .filter(like => like._id !== user?._id)\r\n        .map(like => like.name) || [];\r\n    \r\n    const totalLikesCount = post?.likes.length || 0;\r\n    \r\n    // --- Data Fetching Effect ---\r\n    useEffect(() => {\r\n        const fetchPost = async () => {\r\n            if (!postId) return;\r\n\r\n            try {\r\n                setLoading(true);\r\n                // Ensure the path is correct: /api/posts/[postId]\r\n                const res = await fetch(`/api/posts/${postId}`); \r\n                \r\n                if (!res.ok) {\r\n                    const errorData = await res.json();\r\n                    throw new Error(errorData.error || \"Failed to fetch post\");\r\n                }\r\n                const data = await res.json();\r\n                \r\n                // Assuming the API returns a structure like { success: true, post: { ... } }\r\n                const postData = data.post || data; \r\n\r\n                // --- CRITICAL DATA MAPPING CORRECTION ---\r\n                const formattedPost: PostData = {\r\n                    id: postData._id,\r\n                    // Ensure you access nested fields like author.avatarUrl\r\n                    userAvatarUrl: postData.author?.avatarUrl || `https://placehold.co/50x50/3498db/ffffff?text=${postData.author?.name ? postData.author.name.charAt(0) : \"U\"}`,\r\n                    name: postData.author?.name || \"Unknown User\",\r\n                    feeling: postData.feeling,\r\n                    withUser: postData.withUser,\r\n                    postDate: new Date(postData.createdAt).toLocaleString(),\r\n                    postText: postData.text,\r\n                    \r\n                    // Map media array correctly\r\n                    media: postData.media?.map((m: any) => ({\r\n                        id: m._id,\r\n                        url: m.url, // Assuming the URL is stored in 'url'\r\n                        type: m.type,\r\n                    })) || [],\r\n                    \r\n                    // Map likes array (assuming it contains { _id, name } objects)\r\n                    likes: postData.likes || [],\r\n                    \r\n                    // Map comments array\r\n                    comments: postData.comments?.map((c: any) => ({\r\n                        id: c._id,\r\n                        author: {\r\n                            _id: c.author?._id || \"\",\r\n                            name: c.author?.name || \"Unknown\",\r\n                            avatarUrl: c.author?.avatarUrl || `https://placehold.co/50x50/3498db/ffffff?text=${c.author?.name ? c.author.name.charAt(0) : \"U\"}`,\r\n                        },\r\n                        text: c.text,\r\n                        replies: c.replies || [],\r\n                    })) || [],\r\n                };\r\n\r\n                setPost(formattedPost);\r\n            } catch (err) {\r\n                console.error(\"Error fetching post:\", err);\r\n                setPost(null);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchPost();\r\n    }, [postId]); // Only depend on postId. The derived state (postLiked) handles user data.\r\n\r\n    // --- Action Handlers ---\r\n    const togglePostLike = async () => {\r\n        if (!post || !user?._id) return; // Use user._id\r\n\r\n        // Optimistic UI update\r\n        const isCurrentlyLiked = postLiked;\r\n        \r\n        // Update local state (Optimistic)\r\n        setPost(prevPost => {\r\n            if (!prevPost) return null;\r\n            \r\n            const userId = user._id;\r\n            const updatedLikes = isCurrentlyLiked\r\n                ? prevPost.likes.filter(like => like._id !== userId) // Remove like\r\n                : [...prevPost.likes, { _id: userId, name: user.name }]; // Add like\r\n            \r\n            return { ...prevPost, likes: updatedLikes };\r\n        });\r\n\r\n        try {\r\n            const url = `/api/posts/${postId}/like`;\r\n            const res = await fetch(url, {\r\n                method: \"POST\",\r\n                // CRITICAL: Send Authorization header for protected endpoints\r\n                headers: { \r\n                    \"Content-Type\": \"application/json\",\r\n                    \"Authorization\": `Bearer ${user.token}`,\r\n                },\r\n                body: JSON.stringify({ userId: user._id }), \r\n            });\r\n            \r\n            if (!res.ok) throw new Error(\"Server failed to process like\");\r\n\r\n        } catch (err) {\r\n            console.error(\"Failed to toggle like:\", err);\r\n            // Revert optimistic update on failure\r\n            setPost(prevPost => {\r\n                if (!prevPost) return null;\r\n                const userId = user._id;\r\n                const updatedLikes = isCurrentlyLiked\r\n                    ? [...prevPost.likes, { _id: userId, name: user.name }] \r\n                    : prevPost.likes.filter(like => like._id !== userId);\r\n                return { ...prevPost, likes: updatedLikes };\r\n            });\r\n        }\r\n    };\r\n\r\n    const toggleComments = () => setShowComments((prev) => !prev);\r\n\r\n    const handleShare = async () => {\r\n        if (!post || sharing) return;\r\n        setSharing(true);\r\n        const postUrl = window.location.href;\r\n        const shareText = `Check out this post by ${post.name}: ${post.postText}`;\r\n\r\n        if (navigator.share) {\r\n            try {\r\n                await navigator.share({ title: `Post by ${post.name}`, text: shareText, url: postUrl });\r\n            } catch (err) {\r\n                console.log(\"Error sharing:\", err);\r\n            }\r\n        } else {\r\n            try {\r\n                // Use document.execCommand('copy') for better iframe compatibility\r\n                const tempInput = document.createElement('textarea');\r\n                tempInput.value = `${shareText}\\n${postUrl}`;\r\n                document.body.appendChild(tempInput);\r\n                tempInput.select();\r\n                document.execCommand('copy');\r\n                document.body.removeChild(tempInput);\r\n                alert(\"Post link and text copied to clipboard!\");\r\n            } catch (err) {\r\n                alert(`Copy this link manually: ${postUrl}`);\r\n            }\r\n        }\r\n        setSharing(false);\r\n    };\r\n\r\n    if (loading || !post) {\r\n        return (\r\n            <div className=\"mb-6\">\r\n                <PostCardSkeleton />\r\n                <CommentSkeleton />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // --- Render Logic ---\r\n    return (\r\n        <div className=\"bg-white dark:bg-[#131313] rounded-lg shadow-lg dark:shadow-2xl p-4 w-full mx-auto border border-gray-200 dark:border-gray-700 mb-6\">\r\n            {/* Header */}\r\n            <div className=\"flex items-center mb-3\">\r\n                <img\r\n                    src={post.userAvatarUrl}\r\n                    alt={`${post.name}'s avatar`}\r\n                    className=\"w-10 h-10 rounded-lg object-cover mr-3 ring-1 ring-gray-300 dark:ring-gray-600\"\r\n                />\r\n                <div>\r\n                    <div className\r\n=\"text-gray-900 dark:text-white font-semibold text-sm\">\r\n                        {post.name}\r\n                        {post.feeling && (\r\n                            <span className=\"ml-1 text-gray-700 dark:text-gray-300 font-normal\">\r\n                                is feeling {post.feeling} {post.feeling === \"excited\" ? \"🤩\" : \"\"}\r\n                            </span>\r\n                        )}\r\n                        {post.withUser && (\r\n                            <span className=\"ml-1 text-gray-700 dark:text-gray-300 font-normal\">\r\n                                with <span className=\"font-semibold\">{post.withUser}</span>\r\n                            </span>\r\n                        )}\r\n                    </div>\r\n                    <div className=\"text-gray-500 dark:text-gray-400 text-xs\">{post.postDate}</div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Post Text */}\r\n            <p className=\"text-gray-800 dark:text-gray-200 mb-3 text-sm whitespace-pre-wrap\">{post.postText}</p>\r\n\r\n            {/* Post Media (Images/Videos) */}\r\n            {post.media.length > 0 && (\r\n                <div className={`grid gap-2 mb-4 ${post.media.length === 1 ? \"grid-cols-1\" : \"grid-cols-2\"}`}>\r\n                    {post.media.map((item) => (\r\n                        <div key={item.id} className=\"relative w-full h-52\">\r\n                            {item.type === 'video' ? (\r\n                                <video controls src={item.url} className=\"w-full h-full object-cover rounded-md\" />\r\n                            ) : (\r\n                                <img src={item.url} alt={item.type} className=\"w-full h-full object-cover rounded-md\" />\r\n                            )}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n\r\n            {/* Actions */}\r\n            <div className=\"flex justify-around border-t border-b border-gray-200 dark:border-gray-700 py-2 mb-3\">\r\n                <button onClick={togglePostLike} className={`flex items-center space-x-2 px-4 py-2 rounded-md transition duration-150 ${postLiked ? \"text-red-500 hover:text-red-600 dark:hover:text-red-400\" : \"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700\"}`}>\r\n                    <Heart className=\"w-5 h-5\" fill={postLiked ? \"currentColor\" : \"none\"} />\r\n                    <span className=\"text-sm font-medium\">{postLiked ? \"Liked\" : \"Like\"}</span>\r\n                </button>\r\n\r\n                <button onClick={toggleComments} className=\"flex items-center space-x-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 px-4 py-2 rounded-md transition duration-150\">\r\n                    <MessageCircle className=\"w-5 h-5\" />\r\n                    <span className=\"text-sm font-medium\">Comment</span>\r\n                </button>\r\n\r\n                <button onClick={handleShare} disabled={sharing} className={`flex items-center space-x-2 px-4 py-2 rounded-md transition duration-150 ${sharing ? \"text-gray-400 cursor-not-allowed\" : \"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700\"}`}>\r\n                    <Share2 className=\"w-5 h-5\" />\r\n                    <span className=\"text-sm font-medium\">Share</span>\r\n                </button>\r\n            </div>\r\n\r\n            {/* Liked By */}\r\n            <div className=\"flex items-center text-gray-700 dark:text-gray-300 text-xs mb-3\">\r\n                {totalLikesCount > 0 && (\r\n                    <>\r\n                        <Heart className=\"w-3 h-3 mr-1 text-red-500 fill-current\" />\r\n                        <span className=\"font-semibold\">\r\n                            {postLiked && `You${likedNames.length > 0 ? `, ` : \"\"}`}\r\n                            {likedNames.length > 0 && likedNames.slice(0, 2).join(\", \")}\r\n                            {likedNames.length > 2 && ` and ${likedNames.length - 2} others`}\r\n                        </span>\r\n                        <span className=\"ml-1\"> liked this.</span>\r\n                    </>\r\n                )}\r\n            </div>\r\n\r\n            {/* Comments */}\r\n            {showComments && <Comment currentUserCommentAvatar={user?.profilePic || `https://placehold.co/50x50/3498db/ffffff?text=${user?.name ? user.name.charAt(0) : \"U\"}`} initialComments={post.comments} postId={postId} />}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PostCard;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2154, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/anjal/OneDrive/Desktop/DZINR/frontend/components/posts/MiddleContent.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport PostCreator from \"./PostCreator\";\r\nimport PostCard from \"./PostCard\";\r\nimport { useAuth } from \"@/context/AuthContext\"; // adjust path\r\n\r\ninterface PostFromBackend {\r\n  id: string;\r\n  user: { name: string; profilePic: string };\r\n  feeling?: string;\r\n  withUser?: string;\r\n  createdAt: string;\r\n  text: string;\r\n  media?: { url: string; type: \"image\" | \"video\"; alt?: string }[];\r\n  likedBy: string[];\r\n  totalLikes: number;\r\n  commentsCount: number;\r\n  sharedCount: number;\r\n}\r\n\r\nconst MiddleContent: React.FC = () => {\r\n  const { user } = useAuth();\r\n  const [posts, setPosts] = useState<PostFromBackend[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchPosts = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const res = await fetch(\"/api/posts\", { method: \"GET\" });\r\n        if (!res.ok) throw new Error(\"Failed to fetch posts\");\r\n        const data: PostFromBackend[] = await res.json();\r\n        setPosts(data);\r\n      } catch (err) {\r\n        console.error(err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchPosts();\r\n  }, []);\r\n\r\n  return (\r\n    <main className=\"flex-1 h-screen p-4 space-y-4 overflow-y-auto scrollbar-custom mx-64 mr-64\">\r\n      <PostCreator />\r\n\r\n      {loading\r\n        ? Array.from({ length: 3 }).map((_, idx) => (\r\n            <PostCard key={idx} postId=\"\" /> // optional skeleton inside PostCard\r\n          ))\r\n        : posts.map((post) => (\r\n            <PostCard key={post._id} postId={post._id} />\r\n          ))}\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default MiddleContent;\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA,mNAAiD,cAAc;AAL/D;;;;;;AAqBA,MAAM,gBAA0B;IAC9B,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,kIAAO;IACxB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAoB,EAAE;IACxD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,MAAM,aAAa;YACjB,IAAI;gBACF,WAAW;gBACX,MAAM,MAAM,MAAM,MAAM,cAAc;oBAAE,QAAQ;gBAAM;gBACtD,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;gBAC7B,MAAM,OAA0B,MAAM,IAAI,IAAI;gBAC9C,SAAS;YACX,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC;YAChB,SAAU;gBACR,WAAW;YACb;QACF;QAEA;IACF,GAAG,EAAE;IAEL,qBACE,8OAAC;QAAK,WAAU;;0BACd,8OAAC,8IAAW;;;;;YAEX,UACG,MAAM,IAAI,CAAC;gBAAE,QAAQ;YAAE,GAAG,GAAG,CAAC,CAAC,GAAG,oBAChC,8OAAC,2IAAQ;oBAAW,QAAO;mBAAZ;;;;gEAEjB,MAAM,GAAG,CAAC,CAAC,qBACT,8OAAC,2IAAQ;oBAAgB,QAAQ,KAAK,GAAG;mBAA1B,KAAK,GAAG;;;;;;;;;;;AAInC;uCAEe","debugId":null}}]
}