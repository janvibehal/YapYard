{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/anjal/OneDrive/Desktop/DZINR/frontend/components/Sidebar-left.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState } from \"react\";\r\nimport {\r\n  Home,\r\n  Hash,\r\n  Heart,\r\n  Clapperboard,\r\n  Bell,\r\n  User,\r\n  Upload,\r\n  MessageSquare,\r\n  Bookmark,\r\n  Activity,\r\n  Moon,\r\n  ChevronDown,\r\n  ChevronUp,\r\n} from \"lucide-react\";\r\nimport { useAuth } from \"@/context/AuthContext\";\r\n\r\nconst COLORS = {\r\n  BACKGROUND_PRIMARY: \"bg-[#131313]\",\r\n  BACKGROUND_SECONDARY: \"bg-gray-800\",\r\n  BORDER_COLOR: \"border-gray-800\",\r\n  TEXT_PRIMARY: \"text-white\",\r\n  TEXT_SECONDARY: \"text-gray-300\",\r\n  TEXT_HEADER: \"text-gray-500\",\r\n  ACTIVE_ACCENT: \"border-white\",\r\n  ACTIVE_BACKGROUND: \"bg-gray-800\",\r\n};\r\n\r\nconst menuSections = [\r\n  {\r\n    title: \"MAIN MENU\",\r\n    links: [\r\n      { name: \"Home Page\", icon: Home, isActive: true },\r\n      { name: \"Trending Topics\", icon: Hash },\r\n      { name: \"Popular Creator\", icon: Heart },\r\n      { name: \"Reels\", icon: Clapperboard },\r\n      { name: \"Notification\", icon: Bell },\r\n    ],\r\n    defaultOpen: true,\r\n  },\r\n  {\r\n    title: \"MY MENU\",\r\n    links: [\r\n      { name: \"Profile\", icon: User },\r\n      { name: \"Shot Upload\", icon: Upload },\r\n      { name: \"Message\", icon: MessageSquare },\r\n    ],\r\n    defaultOpen: true,\r\n  },\r\n];\r\n\r\nconst MenuItem = ({ icon: Icon, name, isActive = false, onClick = () => {} }) => (\r\n  <div\r\n    onClick={onClick}\r\n    className={`flex items-center p-3 my-0.5 rounded-lg transition-colors cursor-pointer text-sm\r\n      ${\r\n        isActive\r\n          ? `${COLORS.ACTIVE_BACKGROUND} ${COLORS.TEXT_PRIMARY} font-semibold border-r-4 ${COLORS.ACTIVE_ACCENT}`\r\n          : `${COLORS.TEXT_SECONDARY} opacity-80 hover:${COLORS.BACKGROUND_SECONDARY}/50 hover:${COLORS.TEXT_PRIMARY}`\r\n      }`}\r\n  >\r\n    <Icon className=\"w-5 h-5 mr-3\" />\r\n    <span>{name}</span>\r\n  </div>\r\n);\r\n\r\nconst MenuSection = ({ section }) => {\r\n  const [isOpen, setIsOpen] = useState(section.defaultOpen);\r\n  const headerClasses = `flex items-center justify-between text-xs font-bold tracking-widest ${COLORS.TEXT_HEADER} uppercase cursor-pointer mb-2`;\r\n  const iconClasses = `w-3 h-3 ${COLORS.TEXT_HEADER}`;\r\n\r\n  return (\r\n    <div className=\"mb-6\">\r\n      <div className={headerClasses} onClick={() => setIsOpen(!isOpen)}>\r\n        {section.title}\r\n        {isOpen ? <ChevronUp className={iconClasses} /> : <ChevronDown className={iconClasses} />}\r\n      </div>\r\n      {isOpen && (\r\n        <nav>\r\n          {section.links.map((link, index) => (\r\n            <MenuItem key={index} {...link} />\r\n          ))}\r\n        </nav>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Sidebar = () => {\r\n  const [isDarkMode, setIsDarkMode] = useState(true);\r\n  const { user, logout } = useAuth();\r\n\r\n  // ✅ Get fallback avatar using Picsum if not provided\r\n  const avatarSrc =\r\n    user?.avatarUrl ||\r\n    `https://picsum.photos/200?random=${user?._id || Math.floor(Math.random() * 1000)}`;\r\n\r\n  return (\r\n    <aside\r\n      className={`w-64 h-screen ${COLORS.BACKGROUND_PRIMARY} ${COLORS.TEXT_PRIMARY} p-4 flex flex-col shadow-2xl rounded-xl border ${COLORS.BORDER_COLOR}`}\r\n    >\r\n      {/* Logo */}\r\n      <div className=\"flex items-center mb-8 pt-1\">\r\n        <h1 className={`text-3xl pl-1 font-serif italic ${COLORS.TEXT_PRIMARY}`}>DZINR-APP</h1>\r\n      </div>\r\n\r\n      {/* Menu Sections */}\r\n      <div className=\"flex-grow\">\r\n        {menuSections.map((section, index) => (\r\n          <MenuSection key={index} section={section} />\r\n        ))}\r\n      </div>\r\n\r\n      {/* ✅ Login or Profile */}\r\n      <div className=\"my-4 border-t border-gray-700 pt-4 flex justify-center\">\r\n        {user ? (\r\n          <div className=\"flex items-center space-x-3 cursor-pointer hover:bg-gray-700 px-4 py-2 rounded-lg transition-all w-full justify-between\">\r\n            <div className=\"flex items-center space-x-3\">\r\n              <img\r\n                src={avatarSrc}\r\n                alt=\"Profile\"\r\n                className=\"w-10 h-10 rounded-full border border-gray-600\"\r\n              />\r\n              <span className=\"font-medium text-white capitalize\">{user.name}</span>\r\n            </div>\r\n            <button\r\n              onClick={logout}\r\n              className=\"text-xs bg-red-600 hover:bg-red-700 text-white py-1 px-3 rounded-md\"\r\n            >\r\n              Logout\r\n            </button>\r\n          </div>\r\n        ) : (\r\n          <a\r\n            href=\"/auth/login\"\r\n            className=\"w-full bg-gray-700 hover:bg-gray-600 text-white font-semibold py-2 px-8 rounded-lg shadow-md transition-all duration-200 flex items-center justify-center\"\r\n          >\r\n            Login\r\n          </a>\r\n        )}\r\n      </div>\r\n\r\n      {/* Dark Mode Toggle */}\r\n      <div\r\n        className={`p-3 ${COLORS.BACKGROUND_SECONDARY} rounded-lg border ${COLORS.BORDER_COLOR} flex items-center justify-between shadow-inner`}\r\n      >\r\n        <div className={`flex items-center text-sm ${COLORS.TEXT_SECONDARY}`}>\r\n          <Moon className={`w-5 h-5 mr-3 ${COLORS.TEXT_PRIMARY}`} />\r\n          <span className={COLORS.TEXT_PRIMARY}>Dark Mode</span>\r\n        </div>\r\n        <label className=\"relative inline-flex items-center cursor-pointer\">\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={isDarkMode}\r\n            onChange={() => setIsDarkMode(!isDarkMode)}\r\n            className=\"sr-only peer\"\r\n          />\r\n          <div\r\n            className={`w-12 h-6 ${COLORS.BACKGROUND_SECONDARY} rounded-full peer-checked:bg-white transition-colors duration-300 shadow-md`}\r\n          ></div>\r\n          <div\r\n            className={`absolute top-0.5 left-[3px] w-5 h-5 rounded-full transition-transform duration-300 shadow-lg ${\r\n              isDarkMode ? \"translate-x-[20px] bg-black\" : \"translate-x-0 bg-white\"\r\n            }`}\r\n          ></div>\r\n        </label>\r\n      </div>\r\n    </aside>\r\n  );\r\n};\r\n\r\nexport default Sidebar;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 334, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/anjal/OneDrive/Desktop/DZINR/frontend/components/posts/PostContentModal.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { X, Image, Video, Smile } from \"lucide-react\";\r\nimport EmojiPicker, { EmojiClickData } from \"emoji-picker-react\";\r\nimport { useAuth } from \"@/context/AuthContext\"; \r\n\r\n// --- INTERFACES ---\r\ninterface MediaItem {\r\n  file: File;\r\n  preview: string;\r\n  type: \"image\" | \"video\";\r\n}\r\n\r\ninterface PostContentModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onPostSuccess?: () => void;\r\n  initialMedia?: MediaItem[];\r\n}\r\n\r\ninterface VideoUploadModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onNext: (videoFile: File | null, videoPreview: string | null) => void;\r\n}\r\n// --- END INTERFACES ---\r\n\r\n// --- VIDEO UPLOAD MODAL COMPONENT (Full Code) ---\r\nconst VideoUploadModal: React.FC<VideoUploadModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  onNext,\r\n}) => {\r\n  const [videoFile, setVideoFile] = useState<File | null>(null);\r\n  const [videoPreview, setVideoPreview] = useState<string | null>(null);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const handleVideoSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (e.target.files && e.target.files[0]) {\r\n      setVideoFile(e.target.files[0]);\r\n      setVideoPreview(URL.createObjectURL(e.target.files[0]));\r\n    }\r\n  };\r\n\r\n  const handleDrop = (e: React.DragEvent<HTMLDivElement>) => {\r\n    e.preventDefault();\r\n    if (e.dataTransfer.files && e.dataTransfer.files[0]) {\r\n      setVideoFile(e.dataTransfer.files[0]);\r\n      setVideoPreview(URL.createObjectURL(e.dataTransfer.files[0]));\r\n    }\r\n  };\r\n\r\n  const handleNext = () => {\r\n    onNext(videoFile, videoPreview);\r\n    setVideoFile(null);\r\n    setVideoPreview(null);\r\n    onClose();\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg w-full max-w-md relative\">\r\n        <button\r\n          className=\"absolute top-3 right-3 text-gray-500 dark:text-gray-300\"\r\n          onClick={() => {\r\n            if (videoPreview) URL.revokeObjectURL(videoPreview);\r\n            setVideoFile(null);\r\n            setVideoPreview(null);\r\n            onClose();\r\n          }}\r\n        >\r\n          <X className=\"w-5 h-5\" />\r\n        </button>\r\n\r\n        <h2 className=\"text-lg font-semibold mb-4 text-gray-900 dark:text-white\">\r\n          Attach Video\r\n        </h2>\r\n\r\n        <div\r\n          className=\"border-2 border-dashed border-gray-400 dark:border-gray-600 rounded-md p-6 text-center cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition duration-150\"\r\n          onDrop={handleDrop}\r\n          onDragOver={(e) => e.preventDefault()}\r\n        >\r\n          {videoPreview ? (\r\n            <video\r\n              src={videoPreview}\r\n              controls\r\n              className=\"w-full max-h-60 rounded-md\"\r\n            />\r\n          ) : (\r\n            <>\r\n              <p className=\"text-gray-700 dark:text-gray-200 mb-2\">\r\n                Drag & Drop your video here\r\n              </p>\r\n              <label className=\"text-blue-600 dark:text-blue-400 underline cursor-pointer\">\r\n                or select from your computer\r\n                <input\r\n                  type=\"file\"\r\n                  accept=\"video/*\"\r\n                  onChange={handleVideoSelect}\r\n                  className=\"hidden\"\r\n                />\r\n              </label>\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        <button\r\n          onClick={handleNext}\r\n          disabled={!videoFile}\r\n          className={`mt-4 w-full px-4 py-2 rounded-md font-semibold transition duration-150 ${\r\n            videoFile\r\n              ? \"bg-blue-600 text-white hover:bg-blue-700\"\r\n              : \"bg-gray-300 text-gray-500 cursor-not-allowed\"\r\n          }`}\r\n        >\r\n          Next\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n// --- END VIDEO UPLOAD MODAL COMPONENT ---\r\n\r\n\r\n// --- POST CONTENT MODAL COMPONENT (Full Code) ---\r\nconst PostContentModal: React.FC<PostContentModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  onPostSuccess,\r\n  initialMedia,\r\n}) => {\r\n  // Now user includes the token\r\n  const { user } = useAuth(); \r\n  const [content, setContent] = useState(\"\");\r\n  const [media, setMedia] = useState<MediaItem[]>(initialMedia || []);\r\n  const [showEmojiPicker, setShowEmojiPicker] = useState(false);\r\n  const [showVideoModal, setShowVideoModal] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  \r\n  // Reset state when the modal opens/closes or initialMedia prop changes\r\n  useEffect(() => {\r\n    setMedia(initialMedia || []);\r\n    setContent(\"\");\r\n  }, [initialMedia, isOpen]); \r\n\r\n  // Separate useEffect for cleaning up Object URLs when media state changes or component unmounts\r\n  useEffect(() => {\r\n    return () => {\r\n      media.forEach(item => URL.revokeObjectURL(item.preview));\r\n    };\r\n  }, [media]); \r\n\r\n\r\n  const handleMediaSelect = (\r\n    e: React.ChangeEvent<HTMLInputElement>,\r\n    type: \"image\" | \"video\"\r\n  ) => {\r\n    if (!e.target.files) return;\r\n    const filesArray = Array.from(e.target.files).map((file) => ({\r\n      file,\r\n      preview: URL.createObjectURL(file),\r\n      type,\r\n    }));\r\n    setMedia((prev) => [...prev, ...filesArray]);\r\n    e.target.value = ''; // Reset file input\r\n  };\r\n\r\n  const handleRemoveMedia = (index: number) => {\r\n    const removed = media[index];\r\n    if (removed.preview) URL.revokeObjectURL(removed.preview);\r\n    setMedia((prev) => prev.filter((_, i) => i !== index));\r\n  };\r\n\r\n  const handleEmojiClick = (emojiData: EmojiClickData) => {\r\n    setContent((prev) => prev + emojiData.emoji);\r\n    setShowEmojiPicker(false);\r\n  };\r\n\r\n  const handleVideoNext = (file: File | null, preview: string | null) => {\r\n    if (!file || !preview) return;\r\n    setMedia((prev) => [...prev, { file, preview, type: \"video\" }]);\r\n  };\r\n\r\n  // Robust close handler that cleans up URLs and resets state\r\n  const handleClose = () => {\r\n    media.forEach(item => URL.revokeObjectURL(item.preview)); \r\n    setMedia([]); \r\n    setContent(\"\"); \r\n    onClose(); \r\n  };\r\n\r\n  const handlePostClick = async () => {\r\n    if (!content.trim() && media.length === 0) return;\r\n    setLoading(true);\r\n\r\n    // Check for user token\r\n    if (!user || !user.token) {\r\n        console.error(\"❌ Post failed: User is not authenticated or token is missing.\");\r\n        alert(\"Authentication failed. Please log in again.\");\r\n        setLoading(false);\r\n        return;\r\n    }\r\n    \r\n    let mediaCleanup: string[] = [];\r\n\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append(\"text\", content);\r\n      \r\n      media.forEach((item) => {\r\n        // CRITICAL FIX: Use 'mediaFile' key to match the backend handler\r\n        formData.append(`mediaFile`, item.file); \r\n        formData.append(`mediaType`, item.type); \r\n        mediaCleanup.push(item.preview);\r\n      });\r\n\r\n      const res = await fetch(\"/api/posts\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          Authorization: `Bearer ${user.token}`, // Token is definitely here now\r\n        },\r\n        body: formData,\r\n      });\r\n\r\n      if (!res.ok) {\r\n        throw new Error(`Failed to create post. Status: ${res.status}`); \r\n      }\r\n\r\n      onPostSuccess?.();\r\n      handleClose(); \r\n    } catch (error) {\r\n      console.error(\"❌ Post failed:\", error);\r\n      alert(\"Failed to upload post: \" + (error as Error).message);\r\n    } finally {\r\n      setLoading(false);\r\n      mediaCleanup.forEach(url => URL.revokeObjectURL(url));\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <>\r\n      <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg w-full max-w-3xl relative p-6\">\r\n          <button\r\n            className=\"absolute top-3 right-3 text-gray-500 dark:text-gray-300\"\r\n            onClick={handleClose}\r\n          >\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n\r\n          {/* Profile */}\r\n          <div className=\"flex items-center mb-4\">\r\n            <img\r\n              src={user?.profilePic || \"https://picsum.photos/200\"}\r\n              alt=\"Profile\"\r\n              className=\"w-10 h-10 rounded-full object-cover mr-3\"\r\n            />\r\n            <span className=\"font-semibold text-gray-800 dark:text-gray-100\">\r\n              {user?.name || \"John Doe\"}\r\n            </span>\r\n          </div>\r\n\r\n          {/* Textarea */}\r\n          <textarea\r\n            rows={6}\r\n            placeholder=\"Write something...\"\r\n            className=\"w-full bg-gray-100 dark:bg-gray-700 rounded-md p-3 text-gray-700 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-400 dark:focus:ring-gray-600 resize-none mb-3\"\r\n            value={content}\r\n            onChange={(e) => setContent(e.target.value)}\r\n          />\r\n\r\n          {/* Media Preview */}\r\n          {media.length > 0 && (\r\n            <div className=\"flex flex-wrap gap-2 mb-3 max-h-60 overflow-y-auto\">\r\n              {media.map((item, idx) => (\r\n                <div key={idx} className=\"relative\">\r\n                  {item.type === \"image\" ? (\r\n                    <img\r\n                      src={item.preview}\r\n                      alt=\"attachment\"\r\n                      className=\"w-24 h-24 object-cover rounded-md\"\r\n                    />\r\n                  ) : (\r\n                    <video\r\n                      src={item.preview}\r\n                      controls\r\n                      className=\"w-24 h-24 object-cover rounded-md\"\r\n                    />\r\n                  )}\r\n                  <button\r\n                    onClick={() => handleRemoveMedia(idx)}\r\n                    className=\"absolute top-1 right-1 bg-black bg-opacity-50 rounded-full w-6 h-6 flex items-center justify-center text-white text-sm\"\r\n                  >\r\n                    ×\r\n                  </button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n\r\n          {/* Toolbar */}\r\n          <div className=\"flex items-center space-x-2 relative\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => setShowEmojiPicker((prev) => !prev)}\r\n              className=\"p-2 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600\"\r\n            >\r\n              <Smile className=\"w-5 h-5 text-gray-600 dark:text-gray-300\" />\r\n            </button>\r\n            {showEmojiPicker && (\r\n              <div className=\"absolute z-50 mt-12\">\r\n                <EmojiPicker onEmojiClick={handleEmojiClick} />\r\n              </div>\r\n            )}\r\n\r\n            <label className=\"p-2 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 cursor-pointer\">\r\n              <Image className=\"w-5 h-5 text-gray-600 dark:text-gray-300\" />\r\n              <input\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                multiple\r\n                onChange={(e) => handleMediaSelect(e, \"image\")}\r\n                className=\"hidden\"\r\n              />\r\n            </label>\r\n\r\n            <button\r\n              onClick={() => setShowVideoModal(true)}\r\n              className=\"p-2 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600\"\r\n            >\r\n              <Video className=\"w-5 h-5 text-gray-600 dark:text-gray-300\" />\r\n            </button>\r\n          </div>\r\n\r\n          {/* Post Button */}\r\n          <button\r\n            onClick={handlePostClick}\r\n            disabled={loading || (!content.trim() && media.length === 0)}\r\n            className={`mt-4 w-full px-4 py-2 rounded-md font-semibold transition duration-150 ${\r\n              loading\r\n                ? \"bg-gray-400 text-white\"\r\n                : content.trim() || media.length > 0\r\n                ? \"bg-blue-600 text-white hover:bg-blue-700\"\r\n                : \"bg-gray-300 text-gray-500 cursor-not-allowed\"\r\n            }`}\r\n          >\r\n            {loading ? \"Posting...\" : \"Post\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Video Upload Modal */}\r\n      <VideoUploadModal\r\n        isOpen={showVideoModal}\r\n        onClose={() => setShowVideoModal(false)}\r\n        onNext={handleVideoNext}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PostContentModal;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 808, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/anjal/OneDrive/Desktop/DZINR/frontend/components/posts/PostCreator.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState } from \"react\";\r\nimport { Edit, MoreHorizontal } from \"lucide-react\";\r\nimport PostContentModal from \"./PostContentModal\";\r\nimport { useAuth } from \"@/context/AuthContext\"; // ✅ import your AuthContext\r\n\r\nconst MOCK_AVATAR = \"https://picsum.photos/40/40?random=1\";\r\n\r\nconst PostCreator: React.FC = () => {\r\n  const [isPostModalOpen, setPostModalOpen] = useState(false);\r\n  const [attachedVideo, setAttachedVideo] = useState<File | null>(null);\r\n  const [attachedVideoPreview, setAttachedVideoPreview] = useState<string | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const { user, token } = useAuth(); // ✅ from AuthContext\r\n\r\n  const handlePost = async (content: string, videoFile?: File | null) => {\r\n    if (!user) {\r\n      alert(\"You must be logged in to post.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n\r\n      const formData = new FormData();\r\n      formData.append(\"text\", content);\r\n\r\n      if (videoFile) {\r\n        formData.append(\"media\", videoFile);\r\n        formData.append(\"mediaType\", \"video\");\r\n      }\r\n\r\n      const res = await fetch(\"/api/posts\", {\r\n        method: \"POST\",\r\n        body: formData,\r\n        credentials: \"include\", // ✅ send cookies if JWT stored there\r\n        headers: token\r\n          ? {\r\n              Authorization: `Bearer ${token}`, // ✅ send JWT if in context\r\n            }\r\n          : {},\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (res.ok) {\r\n        console.log(\"✅ Post created successfully:\", data);\r\n        setAttachedVideo(null);\r\n        setAttachedVideoPreview(null);\r\n        setPostModalOpen(false);\r\n      } else {\r\n        console.error(\"❌ Error creating post:\", data.message);\r\n        alert(`Failed to post: ${data.message}`);\r\n      }\r\n    } catch (err) {\r\n      console.error(\"❌ Request failed:\", err);\r\n      alert(\"Something went wrong while posting.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white dark:bg-[#131313] rounded-xs shadow-lg dark:shadow-2xl p-4 w-full mx-auto border border-gray-200 dark:border-gray-700\">\r\n      {/* Top Bar */}\r\n      <div className=\"flex justify-start border-b border-gray-200 dark:border-gray-700 pb-3 mb-3 text-sm md:text-base\">\r\n        <div\r\n          className=\"flex items-center space-x-2 text-gray-900 dark:text-white font-semibold cursor-pointer p-2 rounded-md transition duration-150 relative after:absolute after:bottom-[-13px] after:left-0 after:right-0 after:h-0.5 after:bg-gray-900 dark:after:bg-white\"\r\n          onClick={() => setPostModalOpen(true)}\r\n        >\r\n          <Edit className=\"w-5 h-5\" />\r\n          <span>Make Post</span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Text Input */}\r\n      <div\r\n        className=\"flex space-x-3 items-start mb-4 cursor-text\"\r\n        onClick={() => setPostModalOpen(true)}\r\n      >\r\n        <img\r\n          src={user?.avatarUrl || MOCK_AVATAR}\r\n          alt=\"User Avatar\"\r\n          className=\"w-10 h-10 rounded-lg object-cover ring-2 ring-gray-400 dark:ring-gray-600\"\r\n        />\r\n        <textarea\r\n          rows={3}\r\n          placeholder=\"What you doing? Where you at? Oh you got plans? Please share that!\"\r\n          className=\"flex-1 bg-gray-100 dark:bg-gray-700 border-none rounded-md py-2 px-4 text-gray-700 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-400 dark:focus:ring-gray-600 resize-none transition duration-150\"\r\n          readOnly\r\n        />\r\n      </div>\r\n\r\n      {/* Post Modal */}\r\n      <PostContentModal\r\n        isOpen={isPostModalOpen}\r\n        onClose={() => setPostModalOpen(false)}\r\n        onPost={handlePost}\r\n        initialVideoFile={attachedVideo}\r\n        initialVideoPreview={attachedVideoPreview}\r\n        loading={loading}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PostCreator;\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA,mNAAiD,4BAA4B;AAJ7E;;;;;;AAMA,MAAM,cAAc;AAEpB,MAAM,cAAwB;IAC5B,MAAM,CAAC,iBAAiB,iBAAiB,GAAG,IAAA,iNAAQ,EAAC;IACrD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAc;IAChE,MAAM,CAAC,sBAAsB,wBAAwB,GAAG,IAAA,iNAAQ,EAAgB;IAChF,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,IAAA,kIAAO,KAAI,qBAAqB;IAExD,MAAM,aAAa,OAAO,SAAiB;QACzC,IAAI,CAAC,MAAM;YACT,MAAM;YACN;QACF;QAEA,IAAI;YACF,WAAW;YAEX,MAAM,WAAW,IAAI;YACrB,SAAS,MAAM,CAAC,QAAQ;YAExB,IAAI,WAAW;gBACb,SAAS,MAAM,CAAC,SAAS;gBACzB,SAAS,MAAM,CAAC,aAAa;YAC/B;YAEA,MAAM,MAAM,MAAM,MAAM,cAAc;gBACpC,QAAQ;gBACR,MAAM;gBACN,aAAa;gBACb,SAAS,QACL;oBACE,eAAe,CAAC,OAAO,EAAE,OAAO;gBAClC,IACA,CAAC;YACP;YAEA,MAAM,OAAO,MAAM,IAAI,IAAI;YAE3B,IAAI,IAAI,EAAE,EAAE;gBACV,QAAQ,GAAG,CAAC,gCAAgC;gBAC5C,iBAAiB;gBACjB,wBAAwB;gBACxB,iBAAiB;YACnB,OAAO;gBACL,QAAQ,KAAK,CAAC,0BAA0B,KAAK,OAAO;gBACpD,MAAM,CAAC,gBAAgB,EAAE,KAAK,OAAO,EAAE;YACzC;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,qBAAqB;YACnC,MAAM;QACR,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBACC,WAAU;oBACV,SAAS,IAAM,iBAAiB;;sCAEhC,8OAAC,mNAAI;4BAAC,WAAU;;;;;;sCAChB,8OAAC;sCAAK;;;;;;;;;;;;;;;;;0BAKV,8OAAC;gBACC,WAAU;gBACV,SAAS,IAAM,iBAAiB;;kCAEhC,8OAAC;wBACC,KAAK,MAAM,aAAa;wBACxB,KAAI;wBACJ,WAAU;;;;;;kCAEZ,8OAAC;wBACC,MAAM;wBACN,aAAY;wBACZ,WAAU;wBACV,QAAQ;;;;;;;;;;;;0BAKZ,8OAAC,mJAAgB;gBACf,QAAQ;gBACR,SAAS,IAAM,iBAAiB;gBAChC,QAAQ;gBACR,kBAAkB;gBAClB,qBAAqB;gBACrB,SAAS;;;;;;;;;;;;AAIjB;uCAEe","debugId":null}},
    {"offset": {"line": 954, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 958, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/anjal/OneDrive/Desktop/DZINR/frontend/components/posts/MiddleContent.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport PostCreator from \"./PostCreator\";\r\nimport PostCard from \"./PostCard\";\r\nimport { useAuth } from \"@/context/AuthContext\"; // adjust path\r\n\r\ninterface PostFromBackend {\r\n  id: string;\r\n  user: { name: string; profilePic: string };\r\n  feeling?: string;\r\n  withUser?: string;\r\n  createdAt: string;\r\n  text: string;\r\n  media?: { url: string; type: \"image\" | \"video\"; alt?: string }[];\r\n  likedBy: string[];\r\n  totalLikes: number;\r\n  commentsCount: number;\r\n  sharedCount: number;\r\n}\r\n\r\nconst MiddleContent: React.FC = () => {\r\n  const { user } = useAuth();\r\n  const [posts, setPosts] = useState<PostFromBackend[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchPosts = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const res = await fetch(\"/api/posts\", { method: \"GET\" });\r\n        if (!res.ok) throw new Error(\"Failed to fetch posts\");\r\n        const data: PostFromBackend[] = await res.json();\r\n        setPosts(data);\r\n      } catch (err) {\r\n        console.error(err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchPosts();\r\n  }, []);\r\n\r\n  return (\r\n    <main className=\"flex-1 h-screen p-4 space-y-4 overflow-y-auto scrollbar-custom mx-64 mr-64\">\r\n      <PostCreator />\r\n\r\n      {loading\r\n        ? Array.from({ length: 3 }).map((_, idx) => (\r\n            <PostCard key={idx} postId=\"\" /> // optional skeleton inside PostCard\r\n          ))\r\n        : posts.map((post) => (\r\n            <PostCard key={post._id} postId={post._id} />\r\n          ))}\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default MiddleContent;\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA,mNAAiD,cAAc;AAL/D;;;;;;AAqBA,MAAM,gBAA0B;IAC9B,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,kIAAO;IACxB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAoB,EAAE;IACxD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,MAAM,aAAa;YACjB,IAAI;gBACF,WAAW;gBACX,MAAM,MAAM,MAAM,MAAM,cAAc;oBAAE,QAAQ;gBAAM;gBACtD,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;gBAC7B,MAAM,OAA0B,MAAM,IAAI,IAAI;gBAC9C,SAAS;YACX,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC;YAChB,SAAU;gBACR,WAAW;YACb;QACF;QAEA;IACF,GAAG,EAAE;IAEL,qBACE,8OAAC;QAAK,WAAU;;0BACd,8OAAC,8IAAW;;;;;YAEX,UACG,MAAM,IAAI,CAAC;gBAAE,QAAQ;YAAE,GAAG,GAAG,CAAC,CAAC,GAAG,oBAChC,8OAAC,2IAAQ;oBAAW,QAAO;mBAAZ;;;;gEAEjB,MAAM,GAAG,CAAC,CAAC,qBACT,8OAAC,2IAAQ;oBAAgB,QAAQ,KAAK,GAAG;mBAA1B,KAAK,GAAG;;;;;;;;;;;AAInC;uCAEe","debugId":null}}]
}