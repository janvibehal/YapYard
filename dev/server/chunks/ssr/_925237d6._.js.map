{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/anjal/OneDrive/Desktop/DZINR/frontend/components/Sidebar-left.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState } from \"react\";\r\nimport {\r\n  Home,\r\n  Hash,\r\n  Heart,\r\n  Clapperboard,\r\n  Bell,\r\n  User,\r\n  Upload,\r\n  MessageSquare,\r\n  Moon,\r\n  ChevronDown,\r\n  ChevronUp,\r\n  Menu,\r\n  X,\r\n} from \"lucide-react\";\r\nimport { useAuth } from \"@/context/AuthContext\";\r\n\r\nconst COLORS = {\r\n  BACKGROUND_PRIMARY: \"bg-[#131313]\",\r\n  BACKGROUND_SECONDARY: \"bg-gray-800\",\r\n  BORDER_COLOR: \"border-gray-800\",\r\n  TEXT_PRIMARY: \"text-white\",\r\n  TEXT_SECONDARY: \"text-gray-300\",\r\n  TEXT_HEADER: \"text-gray-500\",\r\n  ACTIVE_ACCENT: \"border-white\",\r\n  ACTIVE_BACKGROUND: \"bg-gray-800\",\r\n};\r\n\r\nconst menuSections = [\r\n  {\r\n    title: \"MAIN MENU\",\r\n    links: [\r\n      { name: \"Home Page\", icon: Home, isActive: true },\r\n      { name: \"Trending Topics\", icon: Hash },\r\n      { name: \"Popular Creator\", icon: Heart },\r\n      { name: \"Reels\", icon: Clapperboard },\r\n      { name: \"Notification\", icon: Bell },\r\n    ],\r\n    defaultOpen: true,\r\n  },\r\n  {\r\n    title: \"MY MENU\",\r\n    links: [\r\n      { name: \"Profile\", icon: User },\r\n      { name: \"Shot Upload\", icon: Upload },\r\n      { name: \"Message\", icon: MessageSquare },\r\n    ],\r\n    defaultOpen: true,\r\n  },\r\n];\r\n\r\nconst MenuItem = ({ icon: Icon, name, isActive = false }) => (\r\n  <div\r\n    className={`flex items-center p-3 my-0.5 rounded-lg transition-colors cursor-pointer text-sm\r\n      ${\r\n        isActive\r\n          ? `${COLORS.ACTIVE_BACKGROUND} ${COLORS.TEXT_PRIMARY} font-semibold border-r-4 ${COLORS.ACTIVE_ACCENT}`\r\n          : `${COLORS.TEXT_SECONDARY} opacity-80 hover:${COLORS.BACKGROUND_SECONDARY}/50 hover:${COLORS.TEXT_PRIMARY}`\r\n      }`}\r\n  >\r\n    <Icon className=\"w-5 h-5 mr-3\" />\r\n    <span>{name}</span>\r\n  </div>\r\n);\r\n\r\nconst MenuSection = ({ section }) => {\r\n  const [isOpen, setIsOpen] = useState(section.defaultOpen);\r\n\r\n  return (\r\n    <div className=\"mb-6\">\r\n      <div\r\n        className={`flex items-center justify-between text-xs font-bold tracking-widest ${COLORS.TEXT_HEADER} uppercase cursor-pointer mb-2`}\r\n        onClick={() => setIsOpen(!isOpen)}\r\n      >\r\n        {section.title}\r\n        {isOpen ? (\r\n          <ChevronUp className=\"w-3 h-3 text-gray-400\" />\r\n        ) : (\r\n          <ChevronDown className=\"w-3 h-3 text-gray-400\" />\r\n        )}\r\n      </div>\r\n\r\n      {isOpen && (\r\n        <nav>\r\n          {section.links.map((link, index) => (\r\n            <MenuItem key={index} {...link} />\r\n          ))}\r\n        </nav>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Sidebar: React.FC = () => {\r\n  const [isDarkMode, setIsDarkMode] = useState(true);\r\n  const [open, setOpen] = useState(false);\r\n  const { user, logout } = useAuth();\r\n\r\n  const avatarSrc =\r\n    user?.avatarUrl ||\r\n    `https://picsum.photos/200?random=${user?._id || Math.floor(Math.random() * 1000)}`;\r\n\r\n  return (\r\n    <>\r\n      {/* Mobile Hamburger Button */}\r\n      <button\r\n        className=\"fixed top-4 left-4 bg-[#1c1c1c] p-2 rounded-lg md:hidden z-[9999]\"\r\n        onClick={() => setOpen(true)}\r\n      >\r\n        <Menu className=\"text-white w-6 h-6\" />\r\n      </button>\r\n\r\n      {/* Backdrop */}\r\n      {open && (\r\n        <div\r\n          className=\"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-sm md:hidden z-[9998]\"\r\n          onClick={() => setOpen(false)}\r\n        />\r\n      )}\r\n\r\n      {/* Sidebar */}\r\n      <aside\r\n        className={`fixed top-0 left-0 h-screen w-64 p-4 z-[9999] shadow-2xl rounded-r-xl\r\n          ${COLORS.BACKGROUND_PRIMARY} ${COLORS.TEXT_PRIMARY} border ${COLORS.BORDER_COLOR}\r\n          transform transition-transform duration-300\r\n          ${open ? \"translate-x-0 pointer-events-auto\" : \"-translate-x-full pointer-events-none\"}\r\n          md:translate-x-0 md:pointer-events-auto md:static`}\r\n      >\r\n        {/* Close Button Mobile */}\r\n        <div className=\"md:hidden flex justify-end mb-4\">\r\n          <button onClick={() => setOpen(false)}>\r\n            <X className=\"text-white w-6 h-6\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Logo */}\r\n        <div className=\"flex items-center mb-8 pt-1\">\r\n          <h1 className=\"text-3xl pl-1 font-serif italic text-white\">DZINR-APP</h1>\r\n        </div>\r\n\r\n        {/* Menu Sections */}\r\n        <div className=\"flex-grow overflow-y-auto pr-1 custom-scroll\">\r\n          {menuSections.map((section, index) => (\r\n            <MenuSection key={index} section={section} />\r\n          ))}\r\n        </div>\r\n\r\n        {/* Profile / Login */}\r\n        <div className=\"my-4 border-t border-gray-700 pt-4\">\r\n          {user ? (\r\n            <div className=\"flex items-center justify-between px-3 py-2 rounded-lg hover:bg-gray-700 cursor-pointer transition-all\">\r\n              <div className=\"flex items-center space-x-3\">\r\n                <img\r\n                  src={avatarSrc}\r\n                  alt=\"Profile\"\r\n                  className=\"w-10 h-10 rounded-full border border-gray-600\"\r\n                />\r\n                <span className=\"font-medium capitalize\">{user.name}</span>\r\n              </div>\r\n              <button\r\n                onClick={logout}\r\n                className=\"text-xs bg-red-600 hover:bg-red-700 text-white py-1 px-3 rounded-md\"\r\n              >\r\n                Logout\r\n              </button>\r\n            </div>\r\n          ) : (\r\n            <a\r\n              href=\"/auth/login\"\r\n              className=\"w-full bg-gray-700 hover:bg-gray-600 text-white font-semibold py-2 px-8 rounded-lg shadow-md transition-all duration-200 flex items-center justify-center\"\r\n            >\r\n              Login\r\n            </a>\r\n          )}\r\n        </div>\r\n\r\n        {/* Dark Mode Toggle */}\r\n        <div\r\n          className={`p-3 ${COLORS.BACKGROUND_SECONDARY} rounded-lg border ${COLORS.BORDER_COLOR} flex items-center justify-between shadow-inner`}\r\n        >\r\n          <div className=\"flex items-center text-sm\">\r\n            <Moon className=\"w-5 h-5 mr-3 text-white\" />\r\n            <span className=\"text-white\">Dark Mode</span>\r\n          </div>\r\n\r\n          <label className=\"relative inline-flex items-center cursor-pointer\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={isDarkMode}\r\n              onChange={() => setIsDarkMode(!isDarkMode)}\r\n              className=\"sr-only peer\"\r\n            />\r\n            <div className=\"w-12 h-6 bg-gray-600 rounded-full peer-checked:bg-white transition-colors duration-300\"></div>\r\n            <div\r\n              className={`absolute top-0.5 left-[3px] w-5 h-5 rounded-full transition-transform duration-300 shadow-lg ${\r\n                isDarkMode ? \"translate-x-[20px] bg-black\" : \"translate-x-0 bg-white\"\r\n              }`}\r\n            />\r\n          </label>\r\n        </div>\r\n      </aside>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Sidebar;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 385, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/anjal/OneDrive/Desktop/DZINR/frontend/components/Sidebar-right.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState } from \"react\";\r\nimport { X, MessageCircle, MoreHorizontal } from \"lucide-react\";\r\n\r\nconst mockRequests = [\r\n  { id: 1, name: \"Tyrell Barrows\", avatar: \"https://picsum.photos/40/40?random=1\", status: \"wants to add you to friends\" },\r\n  { id: 2, name: \"Selena Gomez\", avatar: \"https://picsum.photos/40/40?random=2\", status: \"wants to add you to friends\" },\r\n];\r\n\r\nconst mockContacts = [\r\n  { id: 101, name: \"Amanda Miles\", avatar: \"https://picsum.photos/40/40?random=3\" },\r\n  { id: 102, name: \"Melissa Byron\", avatar: \"https://picsum.photos/40/40?random=4\" },\r\n  { id: 103, name: \"Ronald Bezos\", avatar: \"https://picsum.photos/40/40?random=5\", unread: 3 },\r\n  { id: 104, name: \"Billy Rosewood\", avatar: \"https://picsum.photos/40/40?random=6\" },\r\n  { id: 105, name: \"Katty Monroe\", avatar: \"https://picsum.photos/40/40?random=7\", unread: 2 },\r\n  { id: 106, name: \"Kurt Williamson\", avatar: \"https://picsum.photos/40/40?random=8\" },\r\n];\r\n\r\nconst ContactItem = ({ name, avatar, unread, status, isRequest = false }) => (\r\n  <div className={`flex items-start p-3 ${isRequest ? \"bg-[#242424] mb-3\" : \"\"} rounded-xl hover:bg-[#2c2c2c] transition duration-150`}>\r\n    <img src={avatar} alt={name} className=\"w-10 h-10 rounded-lg mr-3\" />\r\n    <div className=\"flex-1 min-w-0\">\r\n      <p className=\"text-gray-100 font-semibold truncate\">{name}</p>\r\n      {isRequest ? (\r\n        <>\r\n          <p className=\"text-sm text-gray-400 mb-2\">{status}</p>\r\n          <div className=\"flex space-x-2\">\r\n            <button className=\"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-1.5 text-sm rounded-lg\">Accept</button>\r\n            <button className=\"flex-1 bg-gray-700 hover:bg-gray-600 text-gray-300 py-1.5 text-sm rounded-lg border border-gray-600\">Decline</button>\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <div className=\"flex justify-between items-center h-5\">\r\n          <p className=\"text-sm text-gray-500\">Online</p>\r\n          {unread ? <span className=\"bg-red-600 text-white text-xs font-bold w-5 h-5 flex items-center justify-center rounded-full\">{unread}</span> : <MoreHorizontal className=\"w-5 h-5 text-gray-500 hover:text-gray-300\" />}\r\n        </div>\r\n      )}\r\n    </div>\r\n  </div>\r\n);\r\n\r\nconst SidebarRight: React.FC = () => {\r\n  const [open, setOpen] = useState(false);\r\n  const totalRequests = mockRequests.length;\r\n  const totalContacts = mockContacts.length;\r\n\r\n  return (\r\n    <>\r\n      {/* Mobile toggle */}\r\n      <button className=\"fixed top-4 right-4 bg-[#1c1c1c] p-2 rounded-lg md:hidden z-[9999]\" onClick={() => setOpen(true)}>\r\n        <MessageCircle className=\"text-white w-6 h-6\" />\r\n        {totalRequests > 0 && (\r\n          <span className=\"absolute -top-1 -right-1 bg-red-600 text-white text-xs font-bold w-5 h-5 flex items-center justify-center rounded-full border-2 border-[#1c1c1c]\">\r\n            {totalRequests}\r\n          </span>\r\n        )}\r\n      </button>\r\n\r\n      {/* Backdrop */}\r\n      {open && <div className=\"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-sm md:hidden z-[9998]\" onClick={() => setOpen(false)} />}\r\n\r\n      {/* Sidebar */}\r\n      <div\r\n        className={`fixed top-0 right-0 h-full w-72 bg-[#131313] p-3 z-[9999] transform transition-transform duration-300\r\n        ${open ? \"translate-x-0\" : \"translate-x-full\"} md:static md:translate-x-0 md:block`}\r\n      >\r\n        {/* Close button mobile */}\r\n        <div className=\"md:hidden flex justify-end mb-4\">\r\n          <button onClick={() => setOpen(false)}>\r\n            <X className=\"w-6 h-6 text-white\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Requests */}\r\n        <div className=\"mb-4\">\r\n          <h2 className=\"uppercase text-xs font-bold text-gray-400 mb-3 flex justify-between\">\r\n            REQUESTS\r\n            <span className=\"bg-blue-600 text-white text-xs font-bold px-2 py-0.5 rounded-full\">{totalRequests}</span>\r\n          </h2>\r\n          <div className=\"space-y-3\">\r\n            {mockRequests.map((req) => (\r\n              <ContactItem key={req.id} {...req} isRequest />\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Contacts */}\r\n        <div className=\"flex-1\">\r\n          <h2 className=\"uppercase text-xs font-bold text-gray-400 mb-3 flex justify-between\">\r\n            CONTACTS\r\n            <span className=\"bg-gray-700 text-gray-300 text-xs font-bold px-2 py-0.5 rounded-full\">{totalContacts}</span>\r\n          </h2>\r\n          <div className=\"space-y-1 overflow-y-auto max-h-[65vh] custom-scroll\">\r\n            {mockContacts.map((contact) => (\r\n              <ContactItem key={contact.id} {...contact} />\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SidebarRight;\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAHA;;;;AAKA,MAAM,eAAe;IACnB;QAAE,IAAI;QAAG,MAAM;QAAkB,QAAQ;QAAwC,QAAQ;IAA8B;IACvH;QAAE,IAAI;QAAG,MAAM;QAAgB,QAAQ;QAAwC,QAAQ;IAA8B;CACtH;AAED,MAAM,eAAe;IACnB;QAAE,IAAI;QAAK,MAAM;QAAgB,QAAQ;IAAuC;IAChF;QAAE,IAAI;QAAK,MAAM;QAAiB,QAAQ;IAAuC;IACjF;QAAE,IAAI;QAAK,MAAM;QAAgB,QAAQ;QAAwC,QAAQ;IAAE;IAC3F;QAAE,IAAI;QAAK,MAAM;QAAkB,QAAQ;IAAuC;IAClF;QAAE,IAAI;QAAK,MAAM;QAAgB,QAAQ;QAAwC,QAAQ;IAAE;IAC3F;QAAE,IAAI;QAAK,MAAM;QAAmB,QAAQ;IAAuC;CACpF;AAED,MAAM,cAAc,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,YAAY,KAAK,EAAE,iBACtE,8OAAC;QAAI,WAAW,CAAC,qBAAqB,EAAE,YAAY,sBAAsB,GAAG,sDAAsD,CAAC;;0BAClI,8OAAC;gBAAI,KAAK;gBAAQ,KAAK;gBAAM,WAAU;;;;;;0BACvC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAE,WAAU;kCAAwC;;;;;;oBACpD,0BACC;;0CACE,8OAAC;gCAAE,WAAU;0CAA8B;;;;;;0CAC3C,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAO,WAAU;kDAA4E;;;;;;kDAC9F,8OAAC;wCAAO,WAAU;kDAAsG;;;;;;;;;;;;;qDAI5H,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAE,WAAU;0CAAwB;;;;;;4BACpC,uBAAS,8OAAC;gCAAK,WAAU;0CAAiG;;;;;yFAAiB,8OAAC,kOAAc;gCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;AAOhL,MAAM,eAAyB;IAC7B,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,gBAAgB,aAAa,MAAM;IACzC,MAAM,gBAAgB,aAAa,MAAM;IAEzC,qBACE;;0BAEE,8OAAC;gBAAO,WAAU;gBAAqE,SAAS,IAAM,QAAQ;;kCAC5G,8OAAC,yOAAa;wBAAC,WAAU;;;;;;oBACxB,gBAAgB,mBACf,8OAAC;wBAAK,WAAU;kCACb;;;;;;;;;;;;YAMN,sBAAQ,8OAAC;gBAAI,WAAU;gBAA2E,SAAS,IAAM,QAAQ;;;;;;0BAG1H,8OAAC;gBACC,WAAW,CAAC;QACZ,EAAE,OAAO,kBAAkB,mBAAmB,oCAAoC,CAAC;;kCAGnF,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAO,SAAS,IAAM,QAAQ;sCAC7B,cAAA,8OAAC,iMAAC;gCAAC,WAAU;;;;;;;;;;;;;;;;kCAKjB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;;oCAAsE;kDAElF,8OAAC;wCAAK,WAAU;kDAAqE;;;;;;;;;;;;0CAEvF,8OAAC;gCAAI,WAAU;0CACZ,aAAa,GAAG,CAAC,CAAC,oBACjB,8OAAC;wCAA0B,GAAG,GAAG;wCAAE,SAAS;uCAA1B,IAAI,EAAE;;;;;;;;;;;;;;;;kCAM9B,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;;oCAAsE;kDAElF,8OAAC;wCAAK,WAAU;kDAAwE;;;;;;;;;;;;0CAE1F,8OAAC;gCAAI,WAAU;0CACZ,aAAa,GAAG,CAAC,CAAC,wBACjB,8OAAC;wCAA8B,GAAG,OAAO;uCAAvB,QAAQ,EAAE;;;;;;;;;;;;;;;;;;;;;;;;AAO1C;uCAEe","debugId":null}},
    {"offset": {"line": 709, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/anjal/OneDrive/Desktop/DZINR/frontend/components/posts/PostContentModal.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { X, Image, Video, Smile } from \"lucide-react\";\r\nimport EmojiPicker, { EmojiClickData } from \"emoji-picker-react\";\r\nimport { useAuth } from \"@/context/AuthContext\"; \r\n\r\ninterface MediaItem {\r\n  file: File;\r\n  preview: string;\r\n  type: \"image\" | \"video\";\r\n}\r\n\r\ninterface PostContentModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onPostSuccess?: () => void;\r\n  initialMedia?: MediaItem[];\r\n}\r\n\r\ninterface VideoUploadModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onNext: (videoFile: File | null, videoPreview: string | null) => void;\r\n}\r\n\r\nconst VideoUploadModal: React.FC<VideoUploadModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  onNext,\r\n}) => {\r\n  const [videoFile, setVideoFile] = useState<File | null>(null);\r\n  const [videoPreview, setVideoPreview] = useState<string | null>(null);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const handleVideoSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (e.target.files && e.target.files[0]) {\r\n      setVideoFile(e.target.files[0]);\r\n      setVideoPreview(URL.createObjectURL(e.target.files[0]));\r\n    }\r\n  };\r\n\r\n  const handleDrop = (e: React.DragEvent<HTMLDivElement>) => {\r\n    e.preventDefault();\r\n    if (e.dataTransfer.files && e.dataTransfer.files[0]) {\r\n      setVideoFile(e.dataTransfer.files[0]);\r\n      setVideoPreview(URL.createObjectURL(e.dataTransfer.files[0]));\r\n    }\r\n  };\r\n\r\n  const handleNext = () => {\r\n    onNext(videoFile, videoPreview);\r\n    setVideoFile(null);\r\n    setVideoPreview(null);\r\n    onClose();\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg w-full max-w-md relative\">\r\n        <button\r\n          className=\"absolute top-3 right-3 text-gray-500 dark:text-gray-300\"\r\n          onClick={() => {\r\n            if (videoPreview) URL.revokeObjectURL(videoPreview);\r\n            setVideoFile(null);\r\n            setVideoPreview(null);\r\n            onClose();\r\n          }}\r\n        >\r\n          <X className=\"w-5 h-5\" />\r\n        </button>\r\n\r\n        <h2 className=\"text-lg font-semibold mb-4 text-gray-900 dark:text-white\">\r\n          Attach Video\r\n        </h2>\r\n\r\n        <div\r\n          className=\"border-2 border-dashed border-gray-400 dark:border-gray-600 rounded-md p-6 text-center cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition duration-150\"\r\n          onDrop={handleDrop}\r\n          onDragOver={(e) => e.preventDefault()}\r\n        >\r\n          {videoPreview ? (\r\n            <video\r\n              src={videoPreview}\r\n              controls\r\n              className=\"w-full max-h-60 rounded-md\"\r\n            />\r\n          ) : (\r\n            <>\r\n              <p className=\"text-gray-700 dark:text-gray-200 mb-2\">\r\n                Drag & Drop your video here\r\n              </p>\r\n              <label className=\"text-blue-600 dark:text-blue-400 underline cursor-pointer\">\r\n                or select from your computer\r\n                <input\r\n                  type=\"file\"\r\n                  accept=\"video/*\"\r\n                  onChange={handleVideoSelect}\r\n                  className=\"hidden\"\r\n                />\r\n              </label>\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        <button\r\n          onClick={handleNext}\r\n          disabled={!videoFile}\r\n          className={`mt-4 w-full px-4 py-2 rounded-md font-semibold transition duration-150 ${\r\n            videoFile\r\n              ? \"bg-blue-600 text-white hover:bg-blue-700\"\r\n              : \"bg-gray-300 text-gray-500 cursor-not-allowed\"\r\n          }`}\r\n        >\r\n          Next\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\nconst PostContentModal: React.FC<PostContentModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  onPostSuccess,\r\n  initialMedia,\r\n}) => {\r\n  const { user } = useAuth(); \r\n  const [content, setContent] = useState(\"\");\r\n  const [media, setMedia] = useState<MediaItem[]>(initialMedia || []);\r\n  const [showEmojiPicker, setShowEmojiPicker] = useState(false);\r\n  const [showVideoModal, setShowVideoModal] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  \r\n  // reset state when the modal opens/closes or initialMedia prop changes\r\n  useEffect(() => {\r\n    setMedia(initialMedia || []);\r\n    setContent(\"\");\r\n  }, [initialMedia, isOpen]); \r\n\r\n  // separate useEffect for cleaning up Object URLs when media state changes or component unmounts\r\n  useEffect(() => {\r\n    return () => {\r\n      media.forEach(item => URL.revokeObjectURL(item.preview));\r\n    };\r\n  }, [media]); \r\n\r\n\r\n  const handleMediaSelect = (\r\n    e: React.ChangeEvent<HTMLInputElement>,\r\n    type: \"image\" | \"video\"\r\n  ) => {\r\n    if (!e.target.files) return;\r\n    const filesArray = Array.from(e.target.files).map((file) => ({\r\n      file,\r\n      preview: URL.createObjectURL(file),\r\n      type,\r\n    }));\r\n    setMedia((prev) => [...prev, ...filesArray]);\r\n    e.target.value = ''; // Reset file input\r\n  };\r\n\r\n  const handleRemoveMedia = (index: number) => {\r\n    const removed = media[index];\r\n    if (removed.preview) URL.revokeObjectURL(removed.preview);\r\n    setMedia((prev) => prev.filter((_, i) => i !== index));\r\n  };\r\n\r\n  const handleEmojiClick = (emojiData: EmojiClickData) => {\r\n    setContent((prev) => prev + emojiData.emoji);\r\n    setShowEmojiPicker(false);\r\n  };\r\n\r\n  const handleVideoNext = (file: File | null, preview: string | null) => {\r\n    if (!file || !preview) return;\r\n    setMedia((prev) => [...prev, { file, preview, type: \"video\" }]);\r\n  };\r\n\r\n  // robust close handler that cleans up URLs and resets state\r\n  const handleClose = () => {\r\n    media.forEach(item => URL.revokeObjectURL(item.preview)); \r\n    setMedia([]); \r\n    setContent(\"\"); \r\n    onClose(); \r\n  };\r\n\r\n  const handlePostClick = async () => {\r\n    if (!content.trim() && media.length === 0) return;\r\n    setLoading(true);\r\n\r\n    // checking for user token\r\n    if (!user || !user.token) {\r\n        console.error(\"❌ Post failed: User is not authenticated or token is missing.\");\r\n        alert(\"Authentication failed. Please log in again.\");\r\n        setLoading(false);\r\n        return;\r\n    }\r\n    \r\n    let mediaCleanup: string[] = [];\r\n\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append(\"text\", content);\r\n      \r\n      media.forEach((item) => {\r\n      \r\n        formData.append(`mediaFile`, item.file); \r\n        formData.append(`mediaType`, item.type); \r\n        mediaCleanup.push(item.preview);\r\n      });\r\n\r\n      const res = await fetch(\"/api/posts\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          Authorization: `Bearer ${user.token}`,\r\n        },\r\n        body: formData,\r\n      });\r\n\r\n      if (!res.ok) {\r\n        throw new Error(`Failed to create post. Status: ${res.status}`); \r\n      }\r\n\r\n      onPostSuccess?.();\r\n      handleClose(); \r\n    } catch (error) {\r\n      console.error(\"❌ Post failed:\", error);\r\n      alert(\"Failed to upload post: \" + (error as Error).message);\r\n    } finally {\r\n      setLoading(false);\r\n      mediaCleanup.forEach(url => URL.revokeObjectURL(url));\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <>\r\n      <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg w-full max-w-3xl relative p-6\">\r\n          <button\r\n            className=\"absolute top-3 right-3 text-gray-500 dark:text-gray-300\"\r\n            onClick={handleClose}\r\n          >\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n\r\n          {/* Profile */}\r\n          <div className=\"flex items-center mb-4\">\r\n            <img\r\n              src={user?.profilePic || \"https://picsum.photos/200\"}\r\n              alt=\"Profile\"\r\n              className=\"w-10 h-10 rounded-full object-cover mr-3\"\r\n            />\r\n            <span className=\"font-semibold text-gray-800 dark:text-gray-100\">\r\n              {user?.name || \"John Doe\"}\r\n            </span>\r\n          </div>\r\n\r\n          {/* Textarea */}\r\n          <textarea\r\n            rows={6}\r\n            placeholder=\"Write something...\"\r\n            className=\"w-full bg-gray-100 dark:bg-gray-700 rounded-md p-3 text-gray-700 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-400 dark:focus:ring-gray-600 resize-none mb-3\"\r\n            value={content}\r\n            onChange={(e) => setContent(e.target.value)}\r\n          />\r\n\r\n          {/* Media Preview */}\r\n          {media.length > 0 && (\r\n            <div className=\"flex flex-wrap gap-2 mb-3 max-h-60 overflow-y-auto\">\r\n              {media.map((item, idx) => (\r\n                <div key={idx} className=\"relative\">\r\n                  {item.type === \"image\" ? (\r\n                    <img\r\n                      src={item.preview}\r\n                      alt=\"attachment\"\r\n                      className=\"w-24 h-24 object-cover rounded-md\"\r\n                    />\r\n                  ) : (\r\n                    <video\r\n                      src={item.preview}\r\n                      controls\r\n                      className=\"w-24 h-24 object-cover rounded-md\"\r\n                    />\r\n                  )}\r\n                  <button\r\n                    onClick={() => handleRemoveMedia(idx)}\r\n                    className=\"absolute top-1 right-1 bg-black bg-opacity-50 rounded-full w-6 h-6 flex items-center justify-center text-white text-sm\"\r\n                  >\r\n                    ×\r\n                  </button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n\r\n          {/* Toolbar */}\r\n          <div className=\"flex items-center space-x-2 relative\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => setShowEmojiPicker((prev) => !prev)}\r\n              className=\"p-2 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600\"\r\n            >\r\n              <Smile className=\"w-5 h-5 text-gray-600 dark:text-gray-300\" />\r\n            </button>\r\n            {showEmojiPicker && (\r\n              <div className=\"absolute z-50 mt-12\">\r\n                <EmojiPicker onEmojiClick={handleEmojiClick} />\r\n              </div>\r\n            )}\r\n\r\n            <label className=\"p-2 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 cursor-pointer\">\r\n              <Image className=\"w-5 h-5 text-gray-600 dark:text-gray-300\" />\r\n              <input\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                multiple\r\n                onChange={(e) => handleMediaSelect(e, \"image\")}\r\n                className=\"hidden\"\r\n              />\r\n            </label>\r\n\r\n            <button\r\n              onClick={() => setShowVideoModal(true)}\r\n              className=\"p-2 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600\"\r\n            >\r\n              <Video className=\"w-5 h-5 text-gray-600 dark:text-gray-300\" />\r\n            </button>\r\n          </div>\r\n\r\n          {/* Post Button */}\r\n          <button\r\n            onClick={handlePostClick}\r\n            disabled={loading || (!content.trim() && media.length === 0)}\r\n            className={`mt-4 w-full px-4 py-2 rounded-md font-semibold transition duration-150 ${\r\n              loading\r\n                ? \"bg-gray-400 text-white\"\r\n                : content.trim() || media.length > 0\r\n                ? \"bg-blue-600 text-white hover:bg-blue-700\"\r\n                : \"bg-gray-300 text-gray-500 cursor-not-allowed\"\r\n            }`}\r\n          >\r\n            {loading ? \"Posting...\" : \"Post\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Video Upload Modal */}\r\n      <VideoUploadModal\r\n        isOpen={showVideoModal}\r\n        onClose={() => setShowVideoModal(false)}\r\n        onNext={handleVideoNext}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PostContentModal;"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAJA;;;;;;AAyBA,MAAM,mBAAoD,CAAC,EACzD,MAAM,EACN,OAAO,EACP,MAAM,EACP;IACC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAc;IACxD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAgB;IAEhE,IAAI,CAAC,QAAQ,OAAO;IAEpB,MAAM,oBAAoB,CAAC;QACzB,IAAI,EAAE,MAAM,CAAC,KAAK,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,EAAE,EAAE;YACvC,aAAa,EAAE,MAAM,CAAC,KAAK,CAAC,EAAE;YAC9B,gBAAgB,IAAI,eAAe,CAAC,EAAE,MAAM,CAAC,KAAK,CAAC,EAAE;QACvD;IACF;IAEA,MAAM,aAAa,CAAC;QAClB,EAAE,cAAc;QAChB,IAAI,EAAE,YAAY,CAAC,KAAK,IAAI,EAAE,YAAY,CAAC,KAAK,CAAC,EAAE,EAAE;YACnD,aAAa,EAAE,YAAY,CAAC,KAAK,CAAC,EAAE;YACpC,gBAAgB,IAAI,eAAe,CAAC,EAAE,YAAY,CAAC,KAAK,CAAC,EAAE;QAC7D;IACF;IAEA,MAAM,aAAa;QACjB,OAAO,WAAW;QAClB,aAAa;QACb,gBAAgB;QAChB;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBACC,WAAU;oBACV,SAAS;wBACP,IAAI,cAAc,IAAI,eAAe,CAAC;wBACtC,aAAa;wBACb,gBAAgB;wBAChB;oBACF;8BAEA,cAAA,8OAAC,iMAAC;wBAAC,WAAU;;;;;;;;;;;8BAGf,8OAAC;oBAAG,WAAU;8BAA2D;;;;;;8BAIzE,8OAAC;oBACC,WAAU;oBACV,QAAQ;oBACR,YAAY,CAAC,IAAM,EAAE,cAAc;8BAElC,6BACC,8OAAC;wBACC,KAAK;wBACL,QAAQ;wBACR,WAAU;;;;;iFAGZ;;0CACE,8OAAC;gCAAE,WAAU;0CAAwC;;;;;;0CAGrD,8OAAC;gCAAM,WAAU;;oCAA4D;kDAE3E,8OAAC;wCACC,MAAK;wCACL,QAAO;wCACP,UAAU;wCACV,WAAU;;;;;;;;;;;;;;;;;;;8BAOpB,8OAAC;oBACC,SAAS;oBACT,UAAU,CAAC;oBACX,WAAW,CAAC,uEAAuE,EACjF,YACI,6CACA,gDACJ;8BACH;;;;;;;;;;;;;;;;;AAMT;AAGA,MAAM,mBAAoD,CAAC,EACzD,MAAM,EACN,OAAO,EACP,aAAa,EACb,YAAY,EACb;IACC,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,kIAAO;IACxB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAc,gBAAgB,EAAE;IAClE,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAC;IACvD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IACrD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,uEAAuE;IACvE,IAAA,kNAAS,EAAC;QACR,SAAS,gBAAgB,EAAE;QAC3B,WAAW;IACb,GAAG;QAAC;QAAc;KAAO;IAEzB,gGAAgG;IAChG,IAAA,kNAAS,EAAC;QACR,OAAO;YACL,MAAM,OAAO,CAAC,CAAA,OAAQ,IAAI,eAAe,CAAC,KAAK,OAAO;QACxD;IACF,GAAG;QAAC;KAAM;IAGV,MAAM,oBAAoB,CACxB,GACA;QAEA,IAAI,CAAC,EAAE,MAAM,CAAC,KAAK,EAAE;QACrB,MAAM,aAAa,MAAM,IAAI,CAAC,EAAE,MAAM,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC,OAAS,CAAC;gBAC3D;gBACA,SAAS,IAAI,eAAe,CAAC;gBAC7B;YACF,CAAC;QACD,SAAS,CAAC,OAAS;mBAAI;mBAAS;aAAW;QAC3C,EAAE,MAAM,CAAC,KAAK,GAAG,IAAI,mBAAmB;IAC1C;IAEA,MAAM,oBAAoB,CAAC;QACzB,MAAM,UAAU,KAAK,CAAC,MAAM;QAC5B,IAAI,QAAQ,OAAO,EAAE,IAAI,eAAe,CAAC,QAAQ,OAAO;QACxD,SAAS,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,GAAG,IAAM,MAAM;IACjD;IAEA,MAAM,mBAAmB,CAAC;QACxB,WAAW,CAAC,OAAS,OAAO,UAAU,KAAK;QAC3C,mBAAmB;IACrB;IAEA,MAAM,kBAAkB,CAAC,MAAmB;QAC1C,IAAI,CAAC,QAAQ,CAAC,SAAS;QACvB,SAAS,CAAC,OAAS;mBAAI;gBAAM;oBAAE;oBAAM;oBAAS,MAAM;gBAAQ;aAAE;IAChE;IAEA,4DAA4D;IAC5D,MAAM,cAAc;QAClB,MAAM,OAAO,CAAC,CAAA,OAAQ,IAAI,eAAe,CAAC,KAAK,OAAO;QACtD,SAAS,EAAE;QACX,WAAW;QACX;IACF;IAEA,MAAM,kBAAkB;QACtB,IAAI,CAAC,QAAQ,IAAI,MAAM,MAAM,MAAM,KAAK,GAAG;QAC3C,WAAW;QAEX,0BAA0B;QAC1B,IAAI,CAAC,QAAQ,CAAC,KAAK,KAAK,EAAE;YACtB,QAAQ,KAAK,CAAC;YACd,MAAM;YACN,WAAW;YACX;QACJ;QAEA,IAAI,eAAyB,EAAE;QAE/B,IAAI;YACF,MAAM,WAAW,IAAI;YACrB,SAAS,MAAM,CAAC,QAAQ;YAExB,MAAM,OAAO,CAAC,CAAC;gBAEb,SAAS,MAAM,CAAC,CAAC,SAAS,CAAC,EAAE,KAAK,IAAI;gBACtC,SAAS,MAAM,CAAC,CAAC,SAAS,CAAC,EAAE,KAAK,IAAI;gBACtC,aAAa,IAAI,CAAC,KAAK,OAAO;YAChC;YAEA,MAAM,MAAM,MAAM,MAAM,cAAc;gBACpC,QAAQ;gBACR,SAAS;oBACP,eAAe,CAAC,OAAO,EAAE,KAAK,KAAK,EAAE;gBACvC;gBACA,MAAM;YACR;YAEA,IAAI,CAAC,IAAI,EAAE,EAAE;gBACX,MAAM,IAAI,MAAM,CAAC,+BAA+B,EAAE,IAAI,MAAM,EAAE;YAChE;YAEA;YACA;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,kBAAkB;YAChC,MAAM,4BAA4B,AAAC,MAAgB,OAAO;QAC5D,SAAU;YACR,WAAW;YACX,aAAa,OAAO,CAAC,CAAA,MAAO,IAAI,eAAe,CAAC;QAClD;IACF;IAEA,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE;;0BACE,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BACC,WAAU;4BACV,SAAS;sCAET,cAAA,8OAAC,iMAAC;gCAAC,WAAU;;;;;;;;;;;sCAIf,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,KAAK,MAAM,cAAc;oCACzB,KAAI;oCACJ,WAAU;;;;;;8CAEZ,8OAAC;oCAAK,WAAU;8CACb,MAAM,QAAQ;;;;;;;;;;;;sCAKnB,8OAAC;4BACC,MAAM;4BACN,aAAY;4BACZ,WAAU;4BACV,OAAO;4BACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;;;;;;wBAI3C,MAAM,MAAM,GAAG,mBACd,8OAAC;4BAAI,WAAU;sCACZ,MAAM,GAAG,CAAC,CAAC,MAAM,oBAChB,8OAAC;oCAAc,WAAU;;wCACtB,KAAK,IAAI,KAAK,wBACb,8OAAC;4CACC,KAAK,KAAK,OAAO;4CACjB,KAAI;4CACJ,WAAU;;;;;qGAGZ,8OAAC;4CACC,KAAK,KAAK,OAAO;4CACjB,QAAQ;4CACR,WAAU;;;;;;sDAGd,8OAAC;4CACC,SAAS,IAAM,kBAAkB;4CACjC,WAAU;sDACX;;;;;;;mCAjBO;;;;;;;;;;sCA0BhB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,MAAK;oCACL,SAAS,IAAM,mBAAmB,CAAC,OAAS,CAAC;oCAC7C,WAAU;8CAEV,cAAA,8OAAC,6MAAK;wCAAC,WAAU;;;;;;;;;;;gCAElB,iCACC,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC,8LAAW;wCAAC,cAAc;;;;;;;;;;;8CAI/B,8OAAC;oCAAM,WAAU;;sDACf,8OAAC,6MAAK;4CAAC,WAAU;;;;;;sDACjB,8OAAC;4CACC,MAAK;4CACL,QAAO;4CACP,QAAQ;4CACR,UAAU,CAAC,IAAM,kBAAkB,GAAG;4CACtC,WAAU;;;;;;;;;;;;8CAId,8OAAC;oCACC,SAAS,IAAM,kBAAkB;oCACjC,WAAU;8CAEV,cAAA,8OAAC,6MAAK;wCAAC,WAAU;;;;;;;;;;;;;;;;;sCAKrB,8OAAC;4BACC,SAAS;4BACT,UAAU,WAAY,CAAC,QAAQ,IAAI,MAAM,MAAM,MAAM,KAAK;4BAC1D,WAAW,CAAC,uEAAuE,EACjF,UACI,2BACA,QAAQ,IAAI,MAAM,MAAM,MAAM,GAAG,IACjC,6CACA,gDACJ;sCAED,UAAU,eAAe;;;;;;;;;;;;;;;;;0BAMhC,8OAAC;gBACC,QAAQ;gBACR,SAAS,IAAM,kBAAkB;gBACjC,QAAQ;;;;;;;;AAIhB;uCAEe","debugId":null}},
    {"offset": {"line": 1177, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/anjal/OneDrive/Desktop/DZINR/frontend/components/posts/PostCreator.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState } from \"react\";\r\nimport { Edit, MoreHorizontal } from \"lucide-react\";\r\nimport PostContentModal from \"./PostContentModal\";\r\nimport { useAuth } from \"@/context/AuthContext\"; \r\n\r\nconst MOCK_AVATAR = \"https://picsum.photos/40/40?random=1\";\r\n\r\nconst PostCreator: React.FC = () => {\r\n  const [isPostModalOpen, setPostModalOpen] = useState(false);\r\n  const [attachedVideo, setAttachedVideo] = useState<File | null>(null);\r\n  const [attachedVideoPreview, setAttachedVideoPreview] = useState<string | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const { user, token } = useAuth(); \r\n\r\n  const handlePost = async (content: string, videoFile?: File | null) => {\r\n    if (!user) {\r\n      alert(\"You must be logged in to post.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n\r\n      const formData = new FormData();\r\n      formData.append(\"text\", content);\r\n\r\n      if (videoFile) {\r\n        formData.append(\"media\", videoFile);\r\n        formData.append(\"mediaType\", \"video\");\r\n      }\r\n\r\n      const res = await fetch(\"/api/posts\", {\r\n        method: \"POST\",\r\n        body: formData,\r\n        credentials: \"include\",\r\n        headers: token\r\n          ? {\r\n              Authorization: `Bearer ${token}`, \r\n            }\r\n          : {},\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (res.ok) {\r\n        console.log(\"✅ Post created successfully:\", data);\r\n        setAttachedVideo(null);\r\n        setAttachedVideoPreview(null);\r\n        setPostModalOpen(false);\r\n      } else {\r\n        console.error(\"❌ Error creating post:\", data.message);\r\n        alert(`Failed to post: ${data.message}`);\r\n      }\r\n    } catch (err) {\r\n      console.error(\"❌ Request failed:\", err);\r\n      alert(\"Something went wrong while posting.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white dark:bg-[#131313] rounded-xs shadow-lg dark:shadow-2xl p-4 w-full mx-auto border border-gray-200 dark:border-gray-700\">\r\n      {/* Top Bar */}\r\n      <div className=\"flex justify-start border-b border-gray-200 dark:border-gray-700 pb-3 mb-3 text-sm md:text-base\">\r\n        <div\r\n          className=\"flex items-center space-x-2 text-gray-900 dark:text-white font-semibold cursor-pointer p-2 rounded-md transition duration-150 relative after:absolute after:bottom-[-13px] after:left-0 after:right-0 after:h-0.5 after:bg-gray-900 dark:after:bg-white\"\r\n          onClick={() => setPostModalOpen(true)}\r\n        >\r\n          <Edit className=\"w-5 h-5\" />\r\n          <span>Make Post</span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Text Input */}\r\n      <div\r\n        className=\"flex space-x-3 items-start mb-4 cursor-text\"\r\n        onClick={() => setPostModalOpen(true)}\r\n      >\r\n        <img\r\n          src={user?.avatarUrl || MOCK_AVATAR}\r\n          alt=\"User Avatar\"\r\n          className=\"w-10 h-10 rounded-lg object-cover ring-2 ring-gray-400 dark:ring-gray-600\"\r\n        />\r\n        <textarea\r\n          rows={3}\r\n          placeholder=\"What you doing? Where you at? Oh you got plans? Please share that!\"\r\n          className=\"flex-1 bg-gray-100 dark:bg-gray-700 border-none rounded-md py-2 px-4 text-gray-700 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-400 dark:focus:ring-gray-600 resize-none transition duration-150\"\r\n          readOnly\r\n        />\r\n      </div>\r\n\r\n      {/* Post Modal */}\r\n      <PostContentModal\r\n        isOpen={isPostModalOpen}\r\n        onClose={() => setPostModalOpen(false)}\r\n        onPost={handlePost}\r\n        initialVideoFile={attachedVideo}\r\n        initialVideoPreview={attachedVideoPreview}\r\n        loading={loading}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PostCreator;\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AAJA;;;;;;AAMA,MAAM,cAAc;AAEpB,MAAM,cAAwB;IAC5B,MAAM,CAAC,iBAAiB,iBAAiB,GAAG,IAAA,iNAAQ,EAAC;IACrD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAc;IAChE,MAAM,CAAC,sBAAsB,wBAAwB,GAAG,IAAA,iNAAQ,EAAgB;IAChF,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,IAAA,kIAAO;IAE/B,MAAM,aAAa,OAAO,SAAiB;QACzC,IAAI,CAAC,MAAM;YACT,MAAM;YACN;QACF;QAEA,IAAI;YACF,WAAW;YAEX,MAAM,WAAW,IAAI;YACrB,SAAS,MAAM,CAAC,QAAQ;YAExB,IAAI,WAAW;gBACb,SAAS,MAAM,CAAC,SAAS;gBACzB,SAAS,MAAM,CAAC,aAAa;YAC/B;YAEA,MAAM,MAAM,MAAM,MAAM,cAAc;gBACpC,QAAQ;gBACR,MAAM;gBACN,aAAa;gBACb,SAAS,QACL;oBACE,eAAe,CAAC,OAAO,EAAE,OAAO;gBAClC,IACA,CAAC;YACP;YAEA,MAAM,OAAO,MAAM,IAAI,IAAI;YAE3B,IAAI,IAAI,EAAE,EAAE;gBACV,QAAQ,GAAG,CAAC,gCAAgC;gBAC5C,iBAAiB;gBACjB,wBAAwB;gBACxB,iBAAiB;YACnB,OAAO;gBACL,QAAQ,KAAK,CAAC,0BAA0B,KAAK,OAAO;gBACpD,MAAM,CAAC,gBAAgB,EAAE,KAAK,OAAO,EAAE;YACzC;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,qBAAqB;YACnC,MAAM;QACR,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBACC,WAAU;oBACV,SAAS,IAAM,iBAAiB;;sCAEhC,8OAAC,mNAAI;4BAAC,WAAU;;;;;;sCAChB,8OAAC;sCAAK;;;;;;;;;;;;;;;;;0BAKV,8OAAC;gBACC,WAAU;gBACV,SAAS,IAAM,iBAAiB;;kCAEhC,8OAAC;wBACC,KAAK,MAAM,aAAa;wBACxB,KAAI;wBACJ,WAAU;;;;;;kCAEZ,8OAAC;wBACC,MAAM;wBACN,aAAY;wBACZ,WAAU;wBACV,QAAQ;;;;;;;;;;;;0BAKZ,8OAAC,mJAAgB;gBACf,QAAQ;gBACR,SAAS,IAAM,iBAAiB;gBAChC,QAAQ;gBACR,kBAAkB;gBAClB,qBAAqB;gBACrB,SAAS;;;;;;;;;;;;AAIjB;uCAEe","debugId":null}},
    {"offset": {"line": 1324, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/anjal/OneDrive/Desktop/DZINR/frontend/components/comments/CommentThread.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState } from \"react\";\r\nimport { ArrowRight } from \"lucide-react\";\r\nimport { useAuth } from \"@/context/AuthContext\";\r\n\r\nexport interface CommentType {\r\n  _id: string;\r\n  text: string;\r\n  author?: {\r\n    _id: string;\r\n    name: string;\r\n    avatarUrl: string;\r\n  };\r\n  replies?: CommentType[];\r\n  likes?: string[];\r\n  likedByMe?: boolean;\r\n  likesCount?: number;\r\n}\r\n\r\ninterface CommentThreadProps {\r\n  comment: CommentType;\r\n  postId: string;\r\n  parentCommentId?: string;\r\n  onReplyAdded?: (reply: CommentType) => void;\r\n}\r\n\r\nconst BASE_URL = process.env.NEXT_PUBLIC_BASE_URL || \"\";\r\n\r\nconst CommentThread: React.FC<CommentThreadProps> = ({\r\n  comment,\r\n  postId,\r\n  parentCommentId,\r\n  onReplyAdded,\r\n}) => {\r\n  const { user } = useAuth();\r\n\r\n  const topCommentId = parentCommentId || comment._id;\r\n\r\n  const [liked, setLiked] = useState(comment.likedByMe || false);\r\n  const [likesCount, setLikesCount] = useState(\r\n    comment.likesCount || comment.likes?.length || 0\r\n  );\r\n  const [showReplyInput, setShowReplyInput] = useState(false);\r\n  const [showReplies, setShowReplies] = useState(true);\r\n  const [replyText, setReplyText] = useState(\"\");\r\n  const [replies, setReplies] = useState<CommentType[]>(comment.replies || []);\r\n\r\n  const [loadingLike, setLoadingLike] = useState(false);\r\n  const [loadingReply, setLoadingReply] = useState(false);\r\n\r\n  const handleLike = async () => {\r\n    if (loadingLike || !user?.token) return;\r\n\r\n    setLoadingLike(true);\r\n    try {\r\n      const res = await fetch(`${BASE_URL}/api/comments/likes/${comment._id}`, {\r\n        method: \"PUT\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${user.token}`,\r\n        },\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (res.ok && data.success) {\r\n        setLiked(!liked);\r\n        setLikesCount(data.likes);\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error liking comment:\", err);\r\n    } finally {\r\n      setLoadingLike(false);\r\n    }\r\n  };\r\n\r\n  const handleAddReply = async (text: string) => {\r\n    const userId = user?._id || user?.id || user?.userId || user?.user?._id;\r\n\r\n    if (!text.trim() || !userId) {\r\n      console.error(\"User ID missing → cannot send reply\");\r\n      return;\r\n    }\r\n\r\n    setLoadingReply(true);\r\n\r\n    try {\r\n      const res = await fetch(`/api/comments/replies/${topCommentId}`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${user.token}`,\r\n        },\r\n        body: JSON.stringify({\r\n          userId,\r\n          text,\r\n          emojis: [],\r\n        }),\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (!res.ok) {\r\n        console.error(\"Error adding reply:\", data.error);\r\n        return;\r\n      }\r\n\r\n      const newReply = data.reply;\r\n      setReplies((prev) => [...prev, newReply]);\r\n      setReplyText(\"\");\r\n      setShowReplyInput(false);\r\n    } catch (err) {\r\n      console.error(\"Error adding reply:\", err);\r\n    } finally {\r\n      setLoadingReply(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"ml-0 mt-3\">\r\n      <div className=\"flex items-start space-x-2\">\r\n        <img\r\n          src={comment.author?.avatarUrl || \"/default-avatar.png\"}\r\n          alt={comment.author?.name || \"Unknown\"}\r\n          className=\"w-8 h-8 rounded-lg object-cover ring-1 ring-gray-300 dark:ring-gray-600\"\r\n        />\r\n\r\n        <div className=\"flex-1\">\r\n          <div className=\"bg-gray-100 dark:bg-gray-700 px-3 py-1 rounded-lg text-sm\">\r\n            <span className=\"font-semibold text-gray-800 dark:text-gray-200\">\r\n              {comment.author?.name || \"Unknown\"}\r\n            </span>{\" \"}\r\n            {comment.text}\r\n          </div>\r\n\r\n          <div className=\"flex space-x-4 text-xs text-gray-500 dark:text-gray-400 mt-1 ml-1\">\r\n            <button\r\n              onClick={handleLike}\r\n              disabled={loadingLike}\r\n              className={`hover:underline flex items-center space-x-1 ${\r\n                liked ? \"text-red-500\" : \"\"\r\n              }`}\r\n            >\r\n              Like ({likesCount})\r\n            </button>\r\n\r\n            <button\r\n              onClick={() => setShowReplyInput(!showReplyInput)}\r\n              className=\"hover:underline\"\r\n            >\r\n              Reply\r\n            </button>\r\n\r\n            {replies.length > 0 && (\r\n              <button onClick={() => setShowReplies(!showReplies)}>\r\n                {showReplies\r\n                  ? \"Hide Replies\"\r\n                  : `Show Replies (${replies.length})`}\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {showReplyInput && (\r\n            <div className=\"flex items-center space-x-2 mt-2 ml-2\">\r\n              <input\r\n                type=\"text\"\r\n                className=\"flex-1 bg-gray-100 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md py-1 px-2 text-sm\"\r\n                placeholder=\"Write a reply...\"\r\n                value={replyText}\r\n                onChange={(e) => setReplyText(e.target.value)}\r\n                onKeyDown={(e) =>\r\n                  e.key === \"Enter\" && handleAddReply(replyText)\r\n                }\r\n              />\r\n              <button\r\n                onClick={() => handleAddReply(replyText)}\r\n                disabled={loadingReply}\r\n              >\r\n                <ArrowRight className=\"w-5 h-5 text-gray-500\" />\r\n              </button>\r\n            </div>\r\n          )}\r\n\r\n          {showReplies && replies.length > 0 && (\r\n            <div className=\"ml-6 border-l border-gray-300 pl-4 mt-2 space-y-3\">\r\n              {replies.map((reply) => (\r\n                <CommentThread\r\n                  key={reply._id}\r\n                  comment={reply}\r\n                  postId={postId}\r\n                  parentCommentId={topCommentId}\r\n                  onReplyAdded={(newReply) => {\r\n                    setReplies((prev) =>\r\n                      prev.map((r) =>\r\n                        r._id === reply._id\r\n                          ? { ...r, replies: [...(r.replies || []), newReply] }\r\n                          : r\r\n                      )\r\n                    );\r\n                  }}\r\n                />\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CommentThread;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1569, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/anjal/OneDrive/Desktop/DZINR/frontend/components/comments/Comment.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { ArrowRight } from \"lucide-react\";\r\nimport CommentThread, { CommentType } from \"./CommentThread\";\r\nimport { useAuth } from \"@/context/AuthContext\";\r\n\r\ninterface CommentProps {\r\n  currentUserCommentAvatar: string;\r\n  postId: string;\r\n}\r\n\r\nconst Comment: React.FC<CommentProps> = ({\r\n  currentUserCommentAvatar,\r\n  postId,\r\n}) => {\r\n  const { user } = useAuth();\r\n  const [comments, setComments] = useState<CommentType[]>([]);\r\n  const [newComment, setNewComment] = useState(\"\");\r\n  const [showComments, setShowComments] = useState(true);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Fetch comments from backend\r\n  useEffect(() => {\r\n    const fetchComments = async () => {\r\n      if (!postId || !user?.token) return;\r\n      setLoading(true);\r\n      try {\r\n        const res = await fetch(`/api/comments?postId=${postId}`, {\r\n          method: \"GET\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${user.token}`,\r\n          },\r\n        });\r\n        const data = await res.json();\r\n        if (data.success) {\r\n          const mappedComments: CommentType[] = data.comments.map((c: any) => ({\r\n            _id: c._id,\r\n            text: c.text,\r\n            author: {\r\n              _id: c.author?._id || \"unknown\",\r\n              name: c.author?.name || \"Unknown\",\r\n              avatarUrl: c.author?.avatarUrl || \"/default-avatar.png\",\r\n            },\r\n            replies:\r\n              c.replies?.map((r: any) => ({\r\n                _id: r._id,\r\n                text: r.text,\r\n                author: {\r\n                  _id: r.author?._id || \"unknown\",\r\n                  name: r.author?.name || \"Unknown\",\r\n                  avatarUrl: r.author?.avatarUrl || \"/default-avatar.png\",\r\n                },\r\n                replies: [],\r\n                likes: r.likes || [],\r\n                likesCount: r.likes?.length || 0,\r\n                likedByMe: r.likes?.includes(user._id),\r\n              })) || [],\r\n            likes: c.likes || [],\r\n            likesCount: c.likes?.length || 0,\r\n            likedByMe: c.likes?.includes(user._id),\r\n          }));\r\n\r\n          setComments(mappedComments);\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Failed to fetch comments:\", err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchComments();\r\n  }, [postId, user?.token]);\r\n\r\n  const toggleComments = () => setShowComments((prev) => !prev);\r\n\r\n  // Add new comment\r\n  const handleAddComment = async () => {\r\n    if (!newComment.trim() || !user?.token) return;\r\n    try {\r\n      const res = await fetch(\"/api/comments\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${user.token}`,\r\n        },\r\n        body: JSON.stringify({ postId, text: newComment }),\r\n      });\r\n      const data = await res.json();\r\n      if (data.success) {\r\n        const newC: CommentType = {\r\n          _id: data.comment._id,\r\n          text: data.comment.text,\r\n          author: {\r\n            _id: data.comment.author._id,\r\n            name: data.comment.author.name,\r\n            avatarUrl: data.comment.author.avatarUrl || \"/default-avatar.png\",\r\n          },\r\n          replies: [],\r\n          likes: [],\r\n          likesCount: 0,\r\n          likedByMe: false,\r\n        };\r\n        setComments([newC, ...comments]);\r\n        setNewComment(\"\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Failed to add comment:\", err);\r\n    }\r\n  };\r\n\r\n  // Add reply\r\n  const handleAddReply = async (parentId: string, replyText: string) => {\r\n    if (!replyText.trim() || !user?.token) return;\r\n    try {\r\n      const res = await fetch(`/api/comments/replies/${parentId}`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${user.token}`,\r\n        },\r\n        body: JSON.stringify({ text: replyText }),\r\n      });\r\n      const data = await res.json();\r\n      if (data.success) {\r\n        const addReplyRecursively = (list: CommentType[]): CommentType[] =>\r\n          list.map((comment) => {\r\n            if (comment._id === parentId) {\r\n              const newReply: CommentType = {\r\n                _id: data.comment._id,\r\n                text: data.comment.text,\r\n                author: {\r\n                  _id: data.comment.author._id,\r\n                  name: data.comment.author.name,\r\n                  avatarUrl:\r\n                    data.comment.author.avatarUrl || \"/default-avatar.png\",\r\n                },\r\n                replies: [],\r\n                likes: [],\r\n                likesCount: 0,\r\n                likedByMe: false,\r\n              };\r\n              return { ...comment, replies: [...comment.replies, newReply] };\r\n            }\r\n            if (comment.replies.length > 0) {\r\n              return {\r\n                ...comment,\r\n                replies: addReplyRecursively(comment.replies),\r\n              };\r\n            }\r\n            return comment;\r\n          });\r\n\r\n        setComments((prev) => addReplyRecursively(prev));\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Failed to add reply:\", err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"mt-3\">\r\n      <button\r\n        onClick={toggleComments}\r\n        className=\"text-sm text-blue-500 hover:underline mb-2\"\r\n      >\r\n        {showComments ? \"Hide Comments\" : `View Comments (${comments.length})`}\r\n      </button>\r\n\r\n      {showComments && (\r\n        <div className=\"space-y-3\">\r\n          {loading && <div>Loading comments...</div>}\r\n          {!loading &&\r\n            comments.map((comment) => (\r\n              <CommentThread\r\n                key={comment._id}\r\n                comment={comment}\r\n                postId={postId}\r\n                onReplyAdded={(reply) =>\r\n                  handleAddReply(comment._id, reply.text)\r\n                }\r\n              />\r\n            ))}\r\n\r\n          {/* Add new comment input */}\r\n          <div className=\"flex items-center space-x-3 mt-4\">\r\n            <img\r\n              src={currentUserCommentAvatar}\r\n              alt=\"Your avatar\"\r\n              className=\"w-8 h-8 rounded-lg object-cover ring-1 ring-gray-300 dark:ring-gray-600\"\r\n            />\r\n            <div className=\"flex-1 relative\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Write a comment...\"\r\n                className=\"w-full bg-gray-100 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md py-2 pl-4 pr-10 text-gray-700 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400 dark:focus:ring-gray-600 transition duration-150 text-sm\"\r\n                value={newComment}\r\n                onChange={(e) => setNewComment(e.target.value)}\r\n                onKeyDown={(e) => e.key === \"Enter\" && handleAddComment()}\r\n              />\r\n              <button\r\n                onClick={handleAddComment}\r\n                className=\"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300\"\r\n              >\r\n                <ArrowRight className=\"w-5 h-5\" />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Comment;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1840, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/anjal/OneDrive/Desktop/DZINR/frontend/components/posts/PostCardSkeleton.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React from \"react\";\r\n\r\nconst PostCardSkeleton: React.FC = () => {\r\n  return (\r\n    <div className=\"bg-white dark:bg-[#131313] rounded-lg shadow-lg dark:shadow-2xl p-4 w-full mx-auto border border-gray-200 dark:border-gray-700 mb-6 animate-pulse\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center mb-3\">\r\n        <div className=\"w-10 h-10 bg-gray-300 dark:bg-gray-700 rounded-lg mr-3\" />\r\n        <div className=\"flex-1 space-y-2\">\r\n          <div className=\"h-3 bg-gray-300 dark:bg-gray-700 rounded w-32\" />\r\n          <div className=\"h-2 bg-gray-300 dark:bg-gray-700 rounded w-20\" />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Post Text */}\r\n      <div className=\"space-y-2 mb-3\">\r\n        <div className=\"h-3 bg-gray-300 dark:bg-gray-700 rounded w-full\" />\r\n        <div className=\"h-3 bg-gray-300 dark:bg-gray-700 rounded w-5/6\" />\r\n      </div>\r\n\r\n      {/* Post Images */}\r\n      <div className=\"grid gap-2 mb-4 grid-cols-2\">\r\n        <div className=\"h-52 bg-gray-300 dark:bg-gray-700 rounded-md\" />\r\n        <div className=\"h-52 bg-gray-300 dark:bg-gray-700 rounded-md\" />\r\n      </div>\r\n\r\n      {/* Actions */}\r\n      <div className=\"flex justify-around border-t border-b border-gray-200 dark:border-gray-700 py-2 mb-3\">\r\n        <div className=\"h-6 w-16 bg-gray-300 dark:bg-gray-700 rounded-md\" />\r\n        <div className=\"h-6 w-16 bg-gray-300 dark:bg-gray-700 rounded-md\" />\r\n        <div className=\"h-6 w-16 bg-gray-300 dark:bg-gray-700 rounded-md\" />\r\n      </div>\r\n\r\n      {/* Liked By */}\r\n      <div className=\"h-3 bg-gray-300 dark:bg-gray-700 rounded w-1/3 mb-3\" />\r\n\r\n      {/* Comments */}\r\n      <div className=\"space-y-2\">\r\n        <div className=\"flex items-start space-x-2\">\r\n          <div className=\"w-8 h-8 bg-gray-300 dark:bg-gray-700 rounded-lg\" />\r\n          <div className=\"flex-1 space-y-2\">\r\n            <div className=\"h-3 bg-gray-300 dark:bg-gray-700 rounded w-5/6\" />\r\n            <div className=\"h-2 bg-gray-300 dark:bg-gray-700 rounded w-2/3\" />\r\n          </div>\r\n        </div>\r\n        <div className=\"flex items-start space-x-2\">\r\n          <div className=\"w-8 h-8 bg-gray-300 dark:bg-gray-700 rounded-lg\" />\r\n          <div className=\"flex-1 space-y-2\">\r\n            <div className=\"h-3 bg-gray-300 dark:bg-gray-700 rounded w-4/6\" />\r\n            <div className=\"h-2 bg-gray-300 dark:bg-gray-700 rounded w-1/2\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PostCardSkeleton;\r\n"],"names":[],"mappings":";;;;;AAAA;;AAIA,MAAM,mBAA6B;IACjC,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;;;;;0CACf,8OAAC;gCAAI,WAAU;;;;;;;;;;;;;;;;;;0BAKnB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAI,WAAU;;;;;;;;;;;;0BAIjB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAI,WAAU;;;;;;;;;;;;0BAIjB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAI,WAAU;;;;;;;;;;;;0BAIjB,8OAAC;gBAAI,WAAU;;;;;;0BAGf,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;;;;;0CACf,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;;;;;kDACf,8OAAC;wCAAI,WAAU;;;;;;;;;;;;;;;;;;kCAGnB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;;;;;0CACf,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;;;;;kDACf,8OAAC;wCAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAM3B;uCAEe","debugId":null}},
    {"offset": {"line": 2072, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/anjal/OneDrive/Desktop/DZINR/frontend/components/comments/CommentSkeleton.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { useAuth } from \"@/context/AuthContext\";\r\n\r\nconst CommentSkeleton: React.FC = () => {\r\n  const { user } = useAuth();\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"text-center py-4 text-gray-500 dark:text-gray-400 text-sm\">\r\n        Please log in to view posts.\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex items-start space-x-2 animate-pulse mt-2 ml-0\">\r\n      <div className=\"w-8 h-8 bg-gray-300 dark:bg-gray-700 rounded-lg\" />\r\n      <div className=\"flex-1 space-y-2\">\r\n        <div className=\"h-3 bg-gray-300 dark:bg-gray-700 rounded w-3/4\" />\r\n        <div className=\"h-2 bg-gray-300 dark:bg-gray-700 rounded w-1/2\" />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CommentSkeleton;\r\n"],"names":[],"mappings":";;;;;AAGA;AAHA;;;AAKA,MAAM,kBAA4B;IAChC,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,kIAAO;IAExB,IAAI,CAAC,MAAM;QACT,qBACE,8OAAC;YAAI,WAAU;sBAA4D;;;;;;IAI/E;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;;;;;0BACf,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAI,WAAU;;;;;;;;;;;;;;;;;;AAIvB;uCAEe","debugId":null}},
    {"offset": {"line": 2138, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/anjal/OneDrive/Desktop/DZINR/frontend/components/posts/PostCard.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { Heart, MessageCircle, Share2 } from \"lucide-react\";\r\nimport Comment from \"../comments/Comment\";\r\nimport PostCardSkeleton from \"../posts/PostCardSkeleton\";\r\nimport CommentSkeleton from \"../comments/CommentSkeleton\";\r\nimport { useAuth } from \"@/context/AuthContext\";\r\n\r\ninterface MediaItem {\r\n  id: string;\r\n  url: string;\r\n  type: string;\r\n}\r\n\r\ninterface CommentType {\r\n  id: string;\r\n  author: {\r\n    _id: string;\r\n    name: string;\r\n    avatarUrl: string;\r\n  };\r\n  text: string;\r\n  replies?: CommentType[];\r\n}\r\n\r\ninterface PostData {\r\n  id: string;\r\n  userAvatarUrl: string;\r\n  name: string;\r\n  feeling?: string;\r\n  withUser?: string;\r\n  postDate: string;\r\n  postText: string;\r\n  media: MediaItem[];\r\n  likes: { _id: string; name: string }[];\r\n  comments: CommentType[];\r\n}\r\n\r\ninterface PostCardProps {\r\n  postId: string;\r\n}\r\n\r\nconst PostCard: React.FC<PostCardProps> = ({ postId }) => {\r\n  const { user } = useAuth();\r\n  const [loading, setLoading] = useState(true);\r\n  const [sharing, setSharing] = useState(false);\r\n  const [showComments, setShowComments] = useState(false);\r\n  const [post, setPost] = useState<PostData | null>(null);\r\n\r\n  const postLiked = post?.likes.some((like) => like._id === user?._id) || false;\r\n  const likedNames =\r\n    post?.likes.filter((like) => like._id !== user?._id).map((like) => like.name) || [];\r\n  const totalLikesCount = post?.likes.length || 0;\r\n\r\n  // --- Fetch Post ---\r\n  useEffect(() => {\r\n  const fetchPost = async () => {\r\n    if (!postId || !user?.token) return;\r\n    try {\r\n      setLoading(true);\r\n      const res = await fetch(`/api/posts/${postId}`, {\r\n        headers: {\r\n          Authorization: `Bearer ${user.token}`,\r\n        },\r\n      });\r\n      if (!res.ok) throw new Error(\"Failed to fetch post\");\r\n      const data = await res.json();\r\n      const postData = data.post || data;\r\n\r\n      setPost({\r\n        id: postData._id,\r\n        userAvatarUrl: postData.author?.avatarUrl || `https://placehold.co/50x50/3498db/ffffff?text=${postData.author?.name?.charAt(0) || \"U\"}`,\r\n        name: postData.author?.name || \"Unknown User\",\r\n        feeling: postData.feeling,\r\n        withUser: postData.withUser,\r\n        postDate: new Date(postData.createdAt).toLocaleString(),\r\n        postText: postData.text,\r\n        media: postData.media?.map((m: any) => ({ id: m._id, url: m.url, type: m.type })) || [],\r\n        likes: postData.likes || [],\r\n        comments: postData.comments?.map((c: any) => ({\r\n          id: c._id,\r\n          author: {\r\n            _id: c.author?._id || \"\",\r\n            name: c.author?.name || \"Unknown\",\r\n            avatarUrl: c.author?.avatarUrl || `https://placehold.co/50x50/3498db/ffffff?text=${c.author?.name?.charAt(0) || \"U\"}`,\r\n          },\r\n          text: c.text,\r\n          replies: c.replies || [],\r\n        })) || [],\r\n      });\r\n    } catch (err) {\r\n      console.error(\"Error fetching post:\", err);\r\n      setPost(null);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  fetchPost();\r\n}, [postId, user?.token]);\r\n\r\n\r\n  //like button toggle\r\n  const togglePostLike = async () => {\r\n    if (!post || !user?.token) return;\r\n\r\n    const isLiked = postLiked;\r\n\r\n    setPost((prev) => {\r\n      if (!prev) return null;\r\n      const updatedLikes = isLiked\r\n        ? prev.likes.filter((like) => like._id !== user._id)\r\n        : [...prev.likes, { _id: user._id, name: user.name }];\r\n      return { ...prev, likes: updatedLikes };\r\n    });\r\n\r\n    try {\r\n      const res = await fetch(`/api/posts/${postId}/like`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${user.token}`,\r\n        },\r\n        body: JSON.stringify({ userId: user._id }),\r\n      });\r\n      if (!res.ok) throw new Error(\"Server failed to process like\");\r\n    } catch (err) {\r\n      console.error(\"Failed to toggle like:\", err);\r\n\r\n      setPost((prev) => {\r\n        if (!prev) return null;\r\n        const updatedLikes = isLiked\r\n          ? [...prev.likes, { _id: user._id, name: user.name }]\r\n          : prev.likes.filter((like) => like._id !== user._id);\r\n        return { ...prev, likes: updatedLikes };\r\n      });\r\n    }\r\n  };\r\n\r\n  if (loading || !post)\r\n    return (\r\n      <div className=\"mb-6\">\r\n        <PostCardSkeleton />\r\n        <CommentSkeleton />\r\n      </div>\r\n    );\r\n\r\n  return (\r\n    <div className=\"bg-white dark:bg-[#131313] rounded-lg shadow-lg dark:shadow-2xl p-4 w-full mx-auto border border-gray-200 dark:border-gray-700 mb-6\">\r\n\r\n      <div className=\"flex items-center mb-3\">\r\n        <img\r\n          src={post.userAvatarUrl}\r\n          alt={`${post.name}'s avatar`}\r\n          className=\"w-10 h-10 rounded-lg object-cover mr-3 ring-1 ring-gray-300 dark:ring-gray-600\"\r\n        />\r\n        <div>\r\n          <div className=\"text-gray-900 dark:text-white font-semibold text-sm\">\r\n            {post.name}\r\n            {post.feeling && (\r\n              <span className=\"ml-1 text-gray-700 dark:text-gray-300 font-normal\">\r\n                is feeling {post.feeling} {post.feeling === \"excited\" ? \"🤩\" : \"\"}\r\n              </span>\r\n            )}\r\n            {post.withUser && (\r\n              <span className=\"ml-1 text-gray-700 dark:text-gray-300 font-normal\">\r\n                with <span className=\"font-semibold\">{post.withUser}</span>\r\n              </span>\r\n            )}\r\n          </div>\r\n          <div className=\"text-gray-500 dark:text-gray-400 text-xs\">{post.postDate}</div>\r\n        </div>\r\n      </div>\r\n\r\n\r\n      <p className=\"text-gray-800 dark:text-gray-200 mb-3 text-sm whitespace-pre-wrap\">{post.postText}</p>\r\n\r\n      {post.media.length > 0 && (\r\n        <div className={`grid gap-2 mb-4 ${post.media.length === 1 ? \"grid-cols-1\" : \"grid-cols-2\"}`}>\r\n          {post.media.map((item) => (\r\n            <div key={item.id} className=\"relative w-full h-52\">\r\n              {item.type === \"video\" ? (\r\n                <video controls src={item.url} className=\"w-full h-full object-cover rounded-md\" />\r\n              ) : (\r\n                <img src={item.url} alt={item.type} className=\"w-full h-full object-cover rounded-md\" />\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n\r\n      <div className=\"flex justify-around border-t border-b border-gray-200 dark:border-gray-700 py-2 mb-3\">\r\n        <button\r\n          onClick={togglePostLike}\r\n          className={`flex items-center space-x-2 px-4 py-2 rounded-md transition duration-150 ${\r\n            postLiked\r\n              ? \"text-red-500 hover:text-red-600 dark:hover:text-red-400\"\r\n              : \"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700\"\r\n          }`}\r\n        >\r\n          <Heart className=\"w-5 h-5\" fill={postLiked ? \"currentColor\" : \"none\"} />\r\n          <span className=\"text-sm font-medium\">{postLiked ? \"Liked\" : \"Like\"}</span>\r\n        </button>\r\n\r\n        <button\r\n          onClick={() => setShowComments((prev) => !prev)}\r\n          className=\"flex items-center space-x-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 px-4 py-2 rounded-md transition duration-150\"\r\n        >\r\n          <MessageCircle className=\"w-5 h-5\" />\r\n          <span className=\"text-sm font-medium\">Comment</span>\r\n        </button>\r\n\r\n        <button\r\n          disabled={sharing}\r\n          onClick={async () => {\r\n            setSharing(true);\r\n            const postUrl = window.location.href;\r\n            const shareText = `Check out this post by ${post.name}: ${post.postText}`;\r\n            try {\r\n              if (navigator.share) {\r\n                await navigator.share({ title: `Post by ${post.name}`, text: shareText, url: postUrl });\r\n              } else {\r\n                const tempInput = document.createElement(\"textarea\");\r\n                tempInput.value = `${shareText}\\n${postUrl}`;\r\n                document.body.appendChild(tempInput);\r\n                tempInput.select();\r\n                document.execCommand(\"copy\");\r\n                document.body.removeChild(tempInput);\r\n                alert(\"Post link and text copied to clipboard!\");\r\n              }\r\n            } catch (err) {\r\n              console.log(err);\r\n            }\r\n            setSharing(false);\r\n          }}\r\n          className={`flex items-center space-x-2 px-4 py-2 rounded-md transition duration-150 ${\r\n            sharing ? \"text-gray-400 cursor-not-allowed\" : \"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700\"\r\n          }`}\r\n        >\r\n          <Share2 className=\"w-5 h-5\" />\r\n          <span className=\"text-sm font-medium\">Share</span>\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"flex items-center text-gray-700 dark:text-gray-300 text-xs mb-3\">\r\n        {totalLikesCount > 0 && (\r\n          <>\r\n            <Heart className=\"w-3 h-3 mr-1 text-red-500 fill-current\" />\r\n            <span className=\"font-semibold\">\r\n              {postLiked && `You${likedNames.length > 0 ? \", \" : \"\"}`}\r\n              {likedNames.length > 0 && likedNames.slice(0, 2).join(\", \")}\r\n              {likedNames.length > 2 && ` and ${likedNames.length - 2} others`}\r\n            </span>\r\n            <span className=\"ml-1\"> liked this.</span>\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      {showComments && (\r\n        <Comment\r\n          currentUserCommentAvatar={\r\n            user?.profilePic ||\r\n            `https://placehold.co/50x50/3498db/ffffff?text=${user?.name?.charAt(0) || \"U\"}`\r\n          }\r\n          postId={postId}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PostCard;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2571, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/anjal/OneDrive/Desktop/DZINR/frontend/components/posts/MiddleContent.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport PostCreator from \"./PostCreator\";\r\nimport PostCard from \"./PostCard\";\r\nimport { useAuth } from \"@/context/AuthContext\";\r\n\r\ninterface PostFromBackend {\r\n  _id: string;\r\n  author: { name: string; avatarUrl: string };\r\n  feeling?: string;\r\n  withUser?: string;\r\n  createdAt: string;\r\n  text: string;\r\n  media?: { _id: string; url: string; type: \"image\" | \"video\"; alt?: string }[];\r\n  likes?: { _id: string; name }[];\r\n  comments?: any[];\r\n  sharedCount?: number;\r\n}\r\n\r\nconst MiddleContent: React.FC = () => {\r\n  const { user } = useAuth();\r\n  const [posts, setPosts] = useState<PostFromBackend[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchPosts = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const res = await fetch(\"/api/posts\", { method: \"GET\", credentials: \"include\" });\r\n        if (!res.ok) throw new Error(\"Failed to fetch posts\");\r\n        const data: PostFromBackend[] = await res.json();\r\n        setPosts(data);\r\n      } catch (err) {\r\n        console.error(err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchPosts();\r\n  }, []);\r\n\r\n  return (\r\n    <main className=\"flex-1 h-screen p-4 space-y-4 overflow-y-auto scrollbar-custom relative md:ml-64 md:mr-72 mx-auto max-w-4xl sm:px-6 lg:px-8\">\r\n      <PostCreator />\r\n      {loading\r\n        ? Array.from({ length: 3 }).map((_, idx) => <PostCard key={idx} postId=\"\" />)\r\n        : posts.map((post) => <PostCard key={post._id} postId={post._id} />)}\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default MiddleContent;\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAoBA,MAAM,gBAA0B;IAC9B,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,kIAAO;IACxB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAoB,EAAE;IACxD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,MAAM,aAAa;YACjB,IAAI;gBACF,WAAW;gBACX,MAAM,MAAM,MAAM,MAAM,cAAc;oBAAE,QAAQ;oBAAO,aAAa;gBAAU;gBAC9E,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;gBAC7B,MAAM,OAA0B,MAAM,IAAI,IAAI;gBAC9C,SAAS;YACX,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC;YAChB,SAAU;gBACR,WAAW;YACb;QACF;QACA;IACF,GAAG,EAAE;IAEL,qBACE,8OAAC;QAAK,WAAU;;0BACd,8OAAC,8IAAW;;;;;YACX,UACG,MAAM,IAAI,CAAC;gBAAE,QAAQ;YAAE,GAAG,GAAG,CAAC,CAAC,GAAG,oBAAQ,8OAAC,2IAAQ;oBAAW,QAAO;mBAAZ;;;;gEACzD,MAAM,GAAG,CAAC,CAAC,qBAAS,8OAAC,2IAAQ;oBAAgB,QAAQ,KAAK,GAAG;mBAA1B,KAAK,GAAG;;;;;;;;;;;AAGrD;uCAEe","debugId":null}},
    {"offset": {"line": 2644, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/anjal/OneDrive/Desktop/DZINR/frontend/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport SidebarLeft from \"../components/Sidebar-left\";\nimport SidebarRight from \"../components/Sidebar-right\";\nimport MiddleContent from \"../components/posts/MiddleContent\";\n\nexport default function Home() {\n  // Sample posts\n  const posts = [\n    {\n      userAvatarUrl: \"https://i.pravatar.cc/40?img=1\",\n      name: \"Alice Johnson\",\n      feeling: \"excited\",\n      withUser: \"Bob Smith\",\n      postDate: \"2h ago\",\n      postText: \"Had a great day exploring the city!\",\n      postImages: [\n        { src: \"https://picsum.photos/600/400?random=1\", alt: \"City view\" },\n        { src: \"https://picsum.photos/600/400?random=2\", alt: \"Cafe\" },\n      ],\n      likesCount: 34,\n      commentCount: 12,\n      shareCount: 5,\n      likedBy: [\"Ryan Reynolds\", \"Eula Reyes\"],\n      totalLikedByOthers: 22,\n      currentUserCommentAvatar: \"https://i.pravatar.cc/40?img=12\",\n    },\n    {\n      userAvatarUrl: \"https://i.pravatar.cc/40?img=2\",\n      name: \"Patrick Rodriguez\",\n      postDate: \"5h ago\",\n      postText: \"Loving the new music album!\",\n      postImages: [\n        { src: \"https://picsum.photos/600/400?random=3\", alt: \"Album cover\" },\n      ],\n      likesCount: 56,\n      commentCount: 8,\n      shareCount: 3,\n      likedBy: [\"Emma Watson\"],\n      totalLikedByOthers: 15,\n      currentUserCommentAvatar: \"https://i.pravatar.cc/40?img=12\",\n    },\n    {\n      userAvatarUrl: \"https://i.pravatar.cc/40?img=3\",\n      name: \"Emily Davis\",\n      postDate: \"1d ago\",\n      postText: \"Check out this beautiful landscape!\",\n      postImages: [\n        { src: \"https://picsum.photos/600/400?random=4\", alt: \"Landscape\" },\n        { src: \"https://picsum.photos/600/400?random=5\", alt: \"Mountains\" },\n        { src: \"https://picsum.photos/600/400?random=6\", alt: \"Lake\" },\n      ],\n      likesCount: 120,\n      commentCount: 25,\n      shareCount: 10,\n      likedBy: [\"Chris Evans\", \"Scarlett Johansson\"],\n      totalLikedByOthers: 98,\n      currentUserCommentAvatar: \"https://i.pravatar.cc/40?img=12\",\n    },\n  ];\n\n  return (\n    <div className=\"flex min-h-screen bg-gray-50 dark:bg-[#0a0a0a]\">\n      {/* Left Sidebar */}\n      <aside className=\"hidden md:flex w-64 flex-shrink-0 h-screen fixed top-0 left-0\">\n        <SidebarLeft />\n      </aside>\n\n      {/* Left Sidebar Mobile - overlay below right hamburger */}\n      <div className=\"md:hidden fixed top-16 right-4 z-[9999]\">\n        <SidebarLeft />\n      </div>\n\n      {/* Middle content */}\n      <MiddleContent posts={posts} className=\"flex-1 mx-auto md:ml-64 md:mr-64\" />\n\n      {/* Right Sidebar */}\n      <aside className=\"hidden md:flex w-64 flex-shrink-0 h-screen fixed top-0 right-0\">\n        <SidebarRight />\n      </aside>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACtB,eAAe;IACf,MAAM,QAAQ;QACZ;YACE,eAAe;YACf,MAAM;YACN,SAAS;YACT,UAAU;YACV,UAAU;YACV,UAAU;YACV,YAAY;gBACV;oBAAE,KAAK;oBAA0C,KAAK;gBAAY;gBAClE;oBAAE,KAAK;oBAA0C,KAAK;gBAAO;aAC9D;YACD,YAAY;YACZ,cAAc;YACd,YAAY;YACZ,SAAS;gBAAC;gBAAiB;aAAa;YACxC,oBAAoB;YACpB,0BAA0B;QAC5B;QACA;YACE,eAAe;YACf,MAAM;YACN,UAAU;YACV,UAAU;YACV,YAAY;gBACV;oBAAE,KAAK;oBAA0C,KAAK;gBAAc;aACrE;YACD,YAAY;YACZ,cAAc;YACd,YAAY;YACZ,SAAS;gBAAC;aAAc;YACxB,oBAAoB;YACpB,0BAA0B;QAC5B;QACA;YACE,eAAe;YACf,MAAM;YACN,UAAU;YACV,UAAU;YACV,YAAY;gBACV;oBAAE,KAAK;oBAA0C,KAAK;gBAAY;gBAClE;oBAAE,KAAK;oBAA0C,KAAK;gBAAY;gBAClE;oBAAE,KAAK;oBAA0C,KAAK;gBAAO;aAC9D;YACD,YAAY;YACZ,cAAc;YACd,YAAY;YACZ,SAAS;gBAAC;gBAAe;aAAqB;YAC9C,oBAAoB;YACpB,0BAA0B;QAC5B;KACD;IAED,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAM,WAAU;0BACf,cAAA,8OAAC,yIAAW;;;;;;;;;;0BAId,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,yIAAW;;;;;;;;;;0BAId,8OAAC,gJAAa;gBAAC,OAAO;gBAAO,WAAU;;;;;;0BAGvC,8OAAC;gBAAM,WAAU;0BACf,cAAA,8OAAC,0IAAY;;;;;;;;;;;;;;;;AAIrB","debugId":null}}]
}